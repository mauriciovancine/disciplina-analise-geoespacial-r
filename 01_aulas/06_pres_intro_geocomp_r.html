<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introdução à análise geoespacial com R    </title>
    <meta charset="utf-8" />
    <meta name="author" content="Maurício H. Vancine   Milton C. Ribeiro" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/metropolis.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introdução à análise geoespacial com R <br><br><br>
## 6 Estrutura e manipulação de dados vetoriais <br><br><br>
### Maurício H. Vancine <br> Milton C. Ribeiro
### 22/10/2020

---




class: clear
background-image: url(img/geo_vector_sf_allison.png)
background-size: 800px

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

Fonte: [@allison_horst](https://twitter.com/allison_horst)

---

background-image: url(img/r_spatial.jpeg)
background-size: 350px
background-position: 80% 65%

# 6 Estrutura e manipulação de vetores

## Tópicos
1. Pacotes
1. Geometrias sf
1. Classes sf
1. Importar dados vetoriais
1. Descrição de objetos sf
1. Converter dados para sf
1. Converter CRS
1. Operações de atributos
1. Operações espaciais
1. Operações geométricas
1. Exportar dados vetoriais

---

# 6 Estrutura e manipulação de vetores

## Script

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

## .center[`06_script_intro_geocomp_r.R`]

---

background-image: url(img/geo_sp_dep.png)
background-size: 700px
background-position: 50% 65%

# 6.1 Pacotes

## Pacote sp


```r
# sp
install.packages("sp")
library(sp)
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://github.com/edzer/sp/

---

background-image: url(img/package_sf.gif)
background-size: 350px
background-position: 50% 70%

# 6.1 Pacotes

## Pacote sf


```r
# sf
install.packages("sf")
library(sf)
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://r-spatial.github.io/sf/

---

background-image: url(img/cheatsheet_sf.png)
background-size: 500px
background-position: 50% 60%

# 6.1 Pacotes

## Pacote sf

### Cheatsheets

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://raw.githubusercontent.com/rstudio/cheatsheets/master/sf.pdf

---

background-image: url(img/geo_sf_article.png)
background-size: 500px
background-position: 50% 85%

# 6.1 Pacotes

## Pacote sf

### Artigo
&gt; - Pebesma, Edzer. ["Simple Features for R: Standardized Support for Spatial Vector Data."](https://journal.r-project.org/archive/2018/RJ-2018-009/) The R Journal 10.01 (2018): 439-446.

---

background-image: url(img/geo_sf_deps.png)
background-size: 700px
background-position: 50% 85%

# 6.1 Pacotes

## Pacote sf

### Dependências de outros pacotes

---

background-image: url(img/geo_sf_methods.png)
background-size: 600px
background-position: 50% 80%

# 6.1 Pacotes

## Pacote sf

### Métodos

---

background-image: url(img/geo_sf_functions.png)
background-size: 700px
background-position: 50% 70%

# 6.1 Pacotes

## Pacote sf

### Funções

---

# 6.1 Pacotes

## Pacote sf

### **Rápida importação e exportação** de dados

--

### **Desempenho aprimorado** de mapas e gráficos

--

### Objetos `sf` podem ser tratados como `data frames` (`tibbles`) na maioria das **operações de manipulação**

--

### As funções `sf` **podem ser combinadas** usando o operador `%&gt;%` e funcionam bem com `tidyverse`

--

### Os nomes das funções sf são relativamente **consistentes e intuitivos** (todos começam com `sf::st_`)

---

background-image: url(img/geo_vector_data.png)
background-size: 500px
background-position: 45% 80%

# 6.2 Tipos de geometrias sf

## Tipos de dados geoespaciais vetoriais

---

background-image: url(img/geo_vector_sf_types.png)
background-size: 500px
background-position: 50% 80%

# 6.2 Tipos de geometrias sf

## Tipos de geometrias

---

# 6.3 Classes sf

## Simple feature geometries (sfg)

### A classe `sfg` representa os **diferentes tipos de geometrias** no R: ponto, linha, polígono (e seus equivalentes ‘multi’) ou coleção de geometrias

--

#### Funções para criar geometrias da classe `sfg`:


```r
# simple
sf::st_point()
sf::st_linestring()
sf::st_polygon()

# multi
sf::st_multipoint()
sf::st_multilinestring()
sf::st_multipolygon()

# collections
sf::st_geometrycollection()
```

---

# 6.3 Classes sf

## Simple feature geometries (sfg)

### Os objetos `sfg` podem ser **criados** a partir de **três tipos de dados R base**:

&lt;br&gt;

### 1. **vetor numérico**: um único ponto
### 2. **matriz**: um conjunto de pontos, onde cada linha representa um ponto, um multiponto ou uma linha
### 3. **lista**: uma coleção de objetos como matrizes, cadeias multilinha ou coleções de geometrias

---

# 6.3 Classes sf

## Simple feature geometries (sfg)


```r
# vector - point
vec &lt;- c(5, 2)
po &lt;- sf::st_point(vec)
po
```


```r
# plot
plot(po, pch = 20, cex = 4, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-5-1.png" width="35%" style="display: block; margin: auto;" /&gt;

---

# 6.3 Classes sf

## Simple feature geometries (sfg)


```r
# matrix - multipoint
multipoint_matrix &lt;- rbind(c(5, 2), c(1, 3), c(3, 4), c(3, 2))
po_mul &lt;- sf::st_multipoint(multipoint_matrix)
po_mul
```


```r
# plot
plot(po_mul, pch = 20, cex = 4, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-7-1.png" width="35%" style="display: block; margin: auto;" /&gt;

---

# 6.3 Classes sf

## Simple feature geometries (sfg)


```r
# matrix - multipoint
multipoint_matrix &lt;- rbind(c(5, 2), c(1, 3), c(3, 4), c(3, 2))
lin &lt;- sf::st_linestring(multipoint_matrix)
lin
```


```r
# plot
plot(lin, lwd = 2, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-9-1.png" width="35%" style="display: block; margin: auto;" /&gt;

---

# 6.3 Classes sf

## Simple feature geometries (sfg)


```r
# list - polygon
polygon_list &lt;- list(rbind(c(1, 5), c(2, 2), c(4, 1), c(4, 4), c(1, 5)))
pol &lt;- sf::st_polygon(polygon_list)
pol
```


```r
# plot
plot(pol, col = "gray", axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-11-1.png" width="35%" style="display: block; margin: auto;" /&gt;

---

# 6.3 Classes sf

## Simple feature columns (sfc)

### Uma **lista de objetos** `sfg` que possui o **mesmo CSR** (*Coordinate Reference System*)

--

### Pode conter objetos da **mesma geometria** ou de **geometrias diferentes**

--

### Funções para **criar** a classe `sfc` e verificar o **tipo da geometria e CRS**:

```r
sf::st_sfc()
sf::st_geometry_type()
sf::st_crs()
```

---

# 6.3 Classes sf

## Simple feature columns (sfc)

```r
# sfc point
point1 &lt;- sf::st_point(c(5, 2))
point2 &lt;- sf::st_point(c(1, 3))
points_sfc &lt;- sf::st_sfc(point1, point2)
points_sfc
```

```
## Geometry set for 2 features 
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 1 ymin: 2 xmax: 5 ymax: 3
## CRS:            NA
```


```r
sf::st_geometry_type(points_sfc)
```

```
## [1] POINT POINT
## 18 Levels: GEOMETRY POINT LINESTRING POLYGON MULTIPOINT MULTILINESTRING MULTIPOLYGON GEOMETRYCOLLECTION CIRCULARSTRING ... TRIANGLE
```

---

# 6.3 Classes sf

## Simple feature columns (sfc)

```r
# plot
plot(points_sfc, pch = 20, cex = 4, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-15-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.3 Classes sf

## Simple feature columns (sfc)

```r
# sfc geometry
po_pol_sfc &lt;- sf::st_sfc(po, pol)
po_pol_sfc
```

```
## Geometry set for 2 features 
## geometry type:  GEOMETRY
## dimension:      XY
## bbox:           xmin: 1 ymin: 1 xmax: 5 ymax: 5
## CRS:            NA
```


```r
sf::st_geometry_type(po_pol_sfc)
```

```
## [1] POINT   POLYGON
## 18 Levels: GEOMETRY POINT LINESTRING POLYGON MULTIPOINT MULTILINESTRING MULTIPOLYGON GEOMETRYCOLLECTION CIRCULARSTRING ... TRIANGLE
```

---

# 6.3 Classes sf

## Simple feature columns (sfc)

```r
# plot
plot(po_pol_sfc, pch = 20, cex = 4, lwd = 2, col = "gray", axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-18-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.3 Classes sf

## Simple feature columns (sfc)

### Coordinate Reference Systems (CRS) - EPSG

```r
# epsg definition
points_sfc_wgs &lt;- sf::st_sfc(point1, point2, crs = 4326)
sf::st_crs(points_sfc_wgs)
```

```
## Coordinate Reference System:
##   User input: EPSG:4326 
##   wkt:
## GEOGCRS["WGS 84",
##     DATUM["World Geodetic System 1984",
##         ELLIPSOID["WGS 84",6378137,298.257223563,
##             LENGTHUNIT["metre",1]]],
##     PRIMEM["Greenwich",0,
##         ANGLEUNIT["degree",0.0174532925199433]],
##     CS[ellipsoidal,2],
##         AXIS["geodetic latitude (Lat)",north,
##             ORDER[1],
##             ANGLEUNIT["degree",0.0174532925199433]],
##         AXIS["geodetic longitude (Lon)",east,
##             ORDER[2],
##             ANGLEUNIT["degree",0.0174532925199433]],
##     USAGE[
##         SCOPE["Horizontal component of 3D system."],
##         AREA["World."],
##         BBOX[-90,-180,90,180]],
##     ID["EPSG",4326]]
```

---

# 6.3 Classes sf

## Simple feature columns (sfc)

### Coordinate Reference Systems (CRS) - proj4string

```r
# proj4string definition
points_sfc_wgs &lt;- sf::st_sfc(point1, point2, crs = "+proj=longlat +datum=WGS84 +no_defs")
sf::st_crs(points_sfc_wgs)
```

```
## Coordinate Reference System:
##   User input: +proj=longlat +datum=WGS84 +no_defs 
##   wkt:
## GEOGCRS["unknown",
##     DATUM["World Geodetic System 1984",
##         ELLIPSOID["WGS 84",6378137,298.257223563,
##             LENGTHUNIT["metre",1]],
##         ID["EPSG",6326]],
##     PRIMEM["Greenwich",0,
##         ANGLEUNIT["degree",0.0174532925199433],
##         ID["EPSG",8901]],
##     CS[ellipsoidal,2],
##         AXIS["longitude",east,
##             ORDER[1],
##             ANGLEUNIT["degree",0.0174532925199433,
##                 ID["EPSG",9122]]],
##         AXIS["latitude",north,
##             ORDER[2],
##             ANGLEUNIT["degree",0.0174532925199433,
##                 ID["EPSG",9122]]]]
```

---

# 6.3 Classes sf

## Simple feature columns (sfc)

```r
# plot
plot(points_sfc_wgs, pch = 20, cex = 4, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-21-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.3 Classes sf

## A classe sf

### A classe sf (simple features) são *data.frames* com **atributos espaciais** armazenados em uma coluna, geralmente chamada de **geometry** 

--

### Essa **dualidade** é central para o conceito de **simple features**: na maioria das vezes, um sf pode **ser tratado e se comporta** como um *data.frame *

--

### **Simple features** são, em essência, *data.frames* com uma **extensão espacial**

---

# 6.3 Classes sf

## A classe sf

### Criar um objeto sf

```r
rc_point &lt;- sf::st_point(c(-47.57,-22.39))         # sfg object
rc_geom &lt;- sf::st_sfc(rc_point, crs = 4326)        # sfc object
rc_attrib &lt;- data.frame(                       # data.frame object
  name = "Rio Claro",
  temperature = 19,
  date = as.Date("2020-10-13")
)
rc_sf &lt;- sf::st_sf(rc_attrib, geometry = rc_geom)  # sf object
```

---

# 6.3 Classes sf

## A classe sf

### A estrutura de um objeto sf

```r
rc_sf
```

```
## Simple feature collection with 1 feature and 3 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -47.57 ymin: -22.39 xmax: -47.57 ymax: -22.39
## geographic CRS: WGS 84
##        name temperature       date              geometry
## 1 Rio Claro          19 2020-10-13 POINT (-47.57 -22.39)
```

### As duas classes do objeto sf

```r
class(rc_sf)
```

```
## [1] "sf"         "data.frame"
```

---

# 6.3 Classes sf

## A classe sf

```r
# plot
plot(rc_sf[1], pch = 20, cex = 4, axes = TRUE, graticule = TRUE) # rc_sf[1] - plotar a primeira coluna
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-25-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.3 Classes sf

## A classe sf

```r
# plot
plot(rc_sf[2], pch = 20, cex = 4, axes = TRUE, graticule = TRUE) # rc_sf[2] - plotar a segunda coluna
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-26-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.3 Classes sf

## A classe sf

```r
# plot
plot(rc_sf$geometry, pch = 20, cex = 4, axes = TRUE, graticule = TRUE) # rc_sf$geometry - plotar apenas a geometria
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-27-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

# Dúvidas?

---

class: inverse, center, middle

# Vamos começar fazendo o download de vetores pelo R

---

background-image: url(img/geo_data_fbds.png)
background-size: 500px
background-position: 50% 95%

# 6.4 Importar dados

### Fundação Brasileira Desenvolvimento Sustentável (FBDS)

Em 2015, a FBDS deu início ao *Projeto de Mapeamento em Alta Resoluçăo dos Biomas Brasileiros*: 
- Cobertura da terra
- Hidrografia (nascentes, rios e lagos)
- Áreas de Preservaçăo Permanente (APP)

O mapeamento foi concluído para os municípios dos biomas *Mata Atlântica e Cerrado*

Site: https://www.fbds.org.br/&lt;br&gt;
Repositório: http://geo.fbds.org.br/

---

# 6.4 Importar dados

## Download

### Criar um diretório 

```r
# create directory
dir.create(here::here("03_dados", "vetor"))
```

--

### Download de **pontos de nascentes** para Rio Claro/SP

```r
# increase time to download
options(timeout = 600)

# download lines
for(i in c(".dbf", ".prj", ".shp", ".shx")){
  download.file(url = paste0("http://geo.fbds.org.br/SP/RIO_CLARO/HIDROGRAFIA/SP_3543907_NASCENTES", i),
                destfile = here::here("03_dados", "vetor", paste0("SP_3543907_NASCENTES", i)), mode = "wb")
}
```

---

# 6.4 Importar dados

## Download

### Download de **linhas da hidrografia** para Rio Claro/SP

```r
# download lines
for(i in c(".dbf", ".prj", ".shp", ".shx")){
  download.file(url = paste0("http://geo.fbds.org.br/SP/RIO_CLARO/HIDROGRAFIA/SP_3543907_RIOS_SIMPLES", i),
                destfile = here::here("03_dados", "vetor", paste0("SP_3543907_RIOS_SIMPLES", i)), mode = "wb")
}
```

### Download de **polígonos de cobertura da terra** para Rio Claro/SP

```r
# download polygon
for(i in c(".dbf", ".prj", ".shp", ".shx")){
  download.file(url = paste0("http://geo.fbds.org.br/SP/RIO_CLARO/USO/SP_3543907_USO", i),
                destfile = here::here("03_dados", "vetor", paste0("SP_3543907_USO", i)), mode = "wb")
}
```

---

class: inverse, center, middle

# Importar dados preexistentes

---

# 6.4 Importar dados

## Dados preexistentes

```r
# import points
rc_spr &lt;- sf::st_read(here::here("03_dados", "vetor", "SP_3543907_NASCENTES.shp"), quiet = TRUE)
rc_spr
```

```
## Simple feature collection with 1220 features and 5 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 217622.9 ymin: 7504132 xmax: 246367.4 ymax: 7537855
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##    GEOCODIGO MUNICIPIO UF CD_UF    HIDRO                 geometry
## 1    3543907 RIO CLARO SP    35 nascente POINT (217622.9 7528315)
## 2    3543907 RIO CLARO SP    35 nascente POINT (217836.5 7528103)
## 3    3543907 RIO CLARO SP    35 nascente POINT (217988.9 7528203)
## 4    3543907 RIO CLARO SP    35 nascente POINT (218288.9 7528237)
## 5    3543907 RIO CLARO SP    35 nascente POINT (218346.6 7530583)
## 6    3543907 RIO CLARO SP    35 nascente POINT (218393.1 7528031)
## 7    3543907 RIO CLARO SP    35 nascente POINT (218508.3 7528470)
## 8    3543907 RIO CLARO SP    35 nascente POINT (218535.4 7530642)
## 9    3543907 RIO CLARO SP    35 nascente POINT (218583.5 7528215)
## 10   3543907 RIO CLARO SP    35 nascente POINT (218760.1 7530258)
```

---

# 6.4 Importar dados

## Dados preexistentes

```r
# plot
plot(rc_spr$geometry, pch = 20, col = "blue", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-33-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.4 Importar dados

## Dados preexistentes

```r
# import lines
rc_riv &lt;- sf::st_read(here::here("03_dados", "vetor", "SP_3543907_RIOS_SIMPLES.shp"), quiet = TRUE)
rc_riv
```

```
## Simple feature collection with 1 feature and 6 fields
## geometry type:  MULTILINESTRING
## dimension:      XY
## bbox:           xmin: 215155.3 ymin: 7504132 xmax: 246367.4 ymax: 7537978
## projected CRS:  SIRGAS 2000 / UTM zone 23S
##   GEOCODIGO MUNICIPIO UF CD_UF                  HIDRO COMP_KM                       geometry
## 1   3543907 RIO CLARO SP    35 curso d'água (0 - 10m) 1142.98 MULTILINESTRING ((231815.7 ...
```

---

# 6.4 Importar dados

## Dados preexistentes

```r
# plot
plot(rc_riv$geometry, col = "steelblue", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-35-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.4 Importar dados

## Dados preexistentes

```r
# import polygons
rc_use &lt;- sf::st_read(here::here("03_dados", "vetor", "SP_3543907_USO.shp"), quiet = TRUE)
rc_use
```

```
## Simple feature collection with 5 features and 6 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: 215151.7 ymin: 7503723 xmax: 246582.4 ymax: 7537978
## projected CRS:  SIRGAS 2000 / UTM zone 23S
##   GEOCODIGO MUNICIPIO UF CD_UF         CLASSE_USO   AREA_HA                       geometry
## 1   3543907 RIO CLARO SP    35               água   357.027 MULTIPOLYGON (((235487.6 75...
## 2   3543907 RIO CLARO SP    35   área antropizada 37297.800 MULTIPOLYGON (((232275 7504...
## 3   3543907 RIO CLARO SP    35     área edificada  5078.330 MULTIPOLYGON (((233123.6 75...
## 4   3543907 RIO CLARO SP    35 formação florestal  7017.990 MULTIPOLYGON (((232355 7504...
## 5   3543907 RIO CLARO SP    35       silvicultura   138.173 MULTIPOLYGON (((243052.1 75...
```

---

# 6.4 Importar dados

## Dados preexistentes

```r
# plot
plot(rc_use[5], col = c("blue", "orange", "gray30", "forestgreen", "green"), main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-37-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

# Importar dados de GPS

---

class: inverse, center, middle

# Um agradecimento ao Rafael (Urucum), que gentilmente cedeu os dados &lt;svg viewBox="0 0 504 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M456 128c26.5 0 48-21 48-47 0-20-28.5-60.4-41.6-77.8-3.2-4.3-9.6-4.3-12.8 0C436.5 20.6 408 61 408 81c0 26 21.5 47 48 47zm0 32c-44.1 0-80-35.4-80-79 0-4.4.3-14.2 8.1-32.2C345 23.1 298.3 8 248 8 111 8 0 119 0 256s111 248 248 248 248-111 248-248c0-35.1-7.4-68.4-20.5-98.6-6.3 1.5-12.7 2.6-19.5 2.6zm-128-8c23.8 0 52.7 29.3 56 71.4.7 8.6-10.8 12-14.9 4.5l-9.5-17c-7.7-13.7-19.2-21.6-31.5-21.6s-23.8 7.9-31.5 21.6l-9.5 17c-4.1 7.4-15.6 4-14.9-4.5 3.1-42.1 32-71.4 55.8-71.4zm-160 0c23.8 0 52.7 29.3 56 71.4.7 8.6-10.8 12-14.9 4.5l-9.5-17c-7.7-13.7-19.2-21.6-31.5-21.6s-23.8 7.9-31.5 21.6l-9.5 17c-4.2 7.4-15.6 4-14.9-4.5 3.1-42.1 32-71.4 55.8-71.4zm80 280c-60.6 0-134.5-38.3-143.8-93.3-2-11.8 9.3-21.6 20.7-17.9C155.1 330.5 200 336 248 336s92.9-5.5 123.1-15.2c11.5-3.7 22.6 6.2 20.7 17.9-9.3 55-83.2 93.3-143.8 93.3z"&gt;&lt;/path&gt;&lt;/svg&gt;

---

# 6.4 Importar dados

## Dados de GPS (.gpx)

```r
# import gps data
gps_gpx &lt;- sf::read_sf(here::here("03_dados", "vetor", "waypoints.gpx"), layer = "waypoints")
gps_gpx
```

```
## Simple feature collection with 11 features and 23 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -47.54245 ymin: -22.39524 xmax: -47.53969 ymax: -22.39209
## geographic CRS: WGS 84
## # A tibble: 11 x 24
##      ele time                magvar geoidheight name  cmt   desc  src   link1_href link1_text link1_type link2_href link2_text link2_type
##    &lt;dbl&gt; &lt;dttm&gt;               &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     
##  1  603. 2020-08-20 10:13:35     NA          NA 102   33    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
##  2  595. 2020-08-20 10:22:52     NA          NA 103   71    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
##  3  582. 2020-08-20 10:32:30     NA          NA 104   11    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
##  4  587. 2020-08-20 10:42:05     NA          NA 105   72    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
##  5  581. 2020-08-20 10:49:32     NA          NA 106   68    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
##  6  594. 2020-08-20 11:06:53     NA          NA 107   121   &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
##  7  591. 2020-08-20 11:16:36     NA          NA 108   83    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
##  8  594. 2020-08-20 11:27:59     NA          NA 109   162   &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
##  9  594. 2020-08-20 11:43:04     NA          NA 110   103   &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
## 10  602. 2020-08-20 11:58:32     NA          NA 111   52    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
## 11  602. 2020-08-20 12:10:31     NA          NA 112   164   &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      
## # … with 10 more variables: sym &lt;chr&gt;, type &lt;chr&gt;, fix &lt;chr&gt;, sat &lt;int&gt;, hdop &lt;dbl&gt;, vdop &lt;dbl&gt;, pdop &lt;dbl&gt;, ageofdgpsdata &lt;dbl&gt;,
## #   dgpsid &lt;int&gt;, geometry &lt;POINT [°]&gt;
```

---

# 6.4 Importar dados

## Dados de GPS (.gpx)

```r
# plot
plot(gps_gpx$geometry, cex = 4, pch = 20, col = "red", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-39-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.4 Importar dados

## Dados de GPS (.kml)

```r
# import gps data
gps_kml &lt;- sf::read_sf(here::here("03_dados", "vetor", "waypoints.kml"))
gps_kml
```

```
## Simple feature collection with 11 features and 16 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -47.54245 ymin: -22.39524 xmax: -47.53969 ymax: -22.39209
## geographic CRS: WGS 84
## # A tibble: 11 x 17
##    Name  description timestamp           begin               end                 altitudeMode tessellate extrude visibility drawOrder
##    &lt;chr&gt; &lt;chr&gt;       &lt;dttm&gt;              &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;             &lt;int&gt;   &lt;int&gt;      &lt;int&gt;     &lt;int&gt;
##  1 102   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
##  2 103   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
##  3 104   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
##  4 105   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
##  5 106   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
##  6 107   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
##  7 108   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
##  8 109   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
##  9 110   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
## 10 111   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
## 11 112   &lt;NA&gt;        NA                  NA                  NA                  &lt;NA&gt;                 -1       0         -1        NA
## # … with 7 more variables: icon &lt;chr&gt;, elevation &lt;dbl&gt;, comment &lt;chr&gt;, source &lt;chr&gt;, url &lt;chr&gt;, url.name &lt;chr&gt;, geometry &lt;POINT [°]&gt;
```

---

# 6.4 Importar dados

## Dados de GPS (.kml)

```r
# plot
plot(gps_kml$geometry, cex = 4, pch = 20, col = "red", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-41-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

# Importar dados de pacotes

---

background-image: url(img/package_geobr02.png)
background-size: 300px
background-position: 50% 70%

# 6.4 Importar dadosf

## Dados de pacotes: geobr

```r
install.packages("geobr")
library(geobr)
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://github.com/ipeaGIT/geobr

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# brazil 2019
br_2019 &lt;- geobr::read_country(year = 2019, showProgress = FALSE)
br_2019
```

```
## Simple feature collection with 27 features and 5 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.99045 ymin: -33.75118 xmax: -28.84784 ymax: 5.271841
## geographic CRS: SIRGAS 2000
## First 10 features:
##    code_state abbrev_state name_state code_region name_region                           geom
## 1          11           RO   Rondônia           1       Norte MULTIPOLYGON (((-65.3815 -1...
## 2          12           AC       Acre           1       Norte MULTIPOLYGON (((-71.07772 -...
## 3          13           AM   Amazônas           1       Norte MULTIPOLYGON (((-69.83766 -...
## 4          14           RR    Roraima           1       Norte MULTIPOLYGON (((-63.96008 2...
## 5          15           PA       Pará           1       Norte MULTIPOLYGON (((-51.43248 -...
## 6          16           AP      Amapá           1       Norte MULTIPOLYGON (((-53.27918 2...
## 7          17           TO  Tocantins           1       Norte MULTIPOLYGON (((-48.23163 -...
## 8          21           MA   Maranhão           2    Nordeste MULTIPOLYGON (((-46.16128 -...
## 9          22           PI      Piauí           2    Nordeste MULTIPOLYGON (((-42.91539 -...
## 10         23           CE      Ceará           2    Nordeste MULTIPOLYGON (((-41.18292 -...
```

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# plot
plot(br_2019$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-44-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# brazil 1872
br_1872 &lt;- geobr::read_country(year = 1872, showProgress = FALSE)
br_1872
```

```
## Simple feature collection with 1 feature and 0 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.80132 ymin: -33.74912 xmax: -34.79313 ymax: 5.271891
## geographic CRS: SIRGAS 2000
##                             geom
## 1 MULTIPOLYGON (((-48.40975 -...
```

---

# 6.4 Importar dados

## Dados de pacotes: geobr


```r
# plot
plot(br_1872$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-46-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# sao paulo state
sp_2019 &lt;- geobr::read_state(code_state = "SP", year = 2019, showProgress = FALSE)
sp_2019
```

```
## Simple feature collection with 1 feature and 5 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -53.10986 ymin: -25.35794 xmax: -44.16137 ymax: -19.77989
## geographic CRS: SIRGAS 2000
##   code_state abbrev_state name_state code_region name_region                           geom
## 1         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-48.03716 -...
```

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# plot
plot(sp_2019$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-48-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# sao paulo municipalities
sp_mun_2019 &lt;- geobr::read_municipality(code_muni = "SP", year = 2019, showProgress = FALSE)
sp_mun_2019
```

```
## Simple feature collection with 645 features and 7 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -53.10986 ymin: -25.35794 xmax: -44.16137 ymax: -19.77966
## geographic CRS: SIRGAS 2000
## First 10 features:
##    code_muni              name_muni code_state abbrev_state name_state code_region name_region                           geom
## 1    3500105             Adamantina         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-51.17919 -...
## 2    3500204                 Adolfo         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-49.61249 -...
## 3    3500303                  Aguaí         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-47.21948 -...
## 4    3500402         Águas Da Prata         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-46.73076 -...
## 5    3500501       Águas De Lindóia         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-46.66057 -...
## 6    3500550 Águas De Santa Bárbara         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-49.30905 -...
## 7    3500600     Águas De São Pedro         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-47.87649 -...
## 8    3500709                 Agudos         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-49.06121 -...
## 9    3500758               Alambari         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-47.95571 -...
## 10   3500808      Alfredo Marcondes         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-51.46862 -...
```

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# plot
plot(sp_mun_2019$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-50-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# rio claro
rc_2019 &lt;- geobr::read_municipality(code_muni = 3543907, year = 2019, showProgress = FALSE)
rc_2019
```

```
## Simple feature collection with 1 feature and 7 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -47.76536 ymin: -22.55203 xmax: -47.46188 ymax: -22.24368
## geographic CRS: SIRGAS 2000
##     code_muni name_muni code_state abbrev_state name_state code_region name_region                           geom
## 493   3543907 Rio Claro         35           SP  São Paulo           3     Sudeste MULTIPOLYGON (((-47.66303 -...
```

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# plot
plot(rc_2019$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-52-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# biomes
bi_2019 &lt;- geobr::read_biomes(year = 2019, showProgress = FALSE)
bi_2019
```

```
## Simple feature collection with 7 features and 3 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -73.98304 ymin: -34.95942 xmax: -28.84785 ymax: 7.053767
## geographic CRS: SIRGAS 2000
##         name_biome code_biome year                           geom
## 1         Amazônia          1 2019 MULTIPOLYGON (((-44.08515 -...
## 2         Caatinga          2 2019 MULTIPOLYGON (((-41.7408 -2...
## 3          Cerrado          3 2019 MULTIPOLYGON (((-43.39009 -...
## 4   Mata Atlântica          4 2019 MULTIPOLYGON (((-48.70814 -...
## 5            Pampa          5 2019 MULTIPOLYGON (((-52.82472 -...
## 6         Pantanal          6 2019 MULTIPOLYGON (((-57.75946 -...
## 7 Sistema Costeiro         NA 2019 MULTIPOLYGON (((-44.64799 -...
```

---

# 6.4 Importar dados

## Dados de pacotes: geobr

```r
# plot
plot(bi_2019$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-54-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.4 Importar dados

## Dados de pacotes: geobr

&lt;br&gt;

|Function|Geographies available|Years available|Source|
|-----|-----|-----|-----|
|`read_country()`| Country | 1872, 1900, 1911, 1920, 1933, 1940, 1950, 1960, 1970, 1980, 1991, 2000, 2001, 2010, 2013, 2014, 2015, 2016, 2017, 2018, 2019 | IBGE |
|`read_state()`| States | 1872, 1900, 1911, 1920, 1933, 1940, 1950, 1960, 1970, 1980, 1991, 2000, 2001, 2010, 2013, 2014, 2015, 2016, 2017, 2018, 2019 | IBGE |
|`read_municipality()`| Municipality | 1872, 1900, 1911, 1920, 1933, 1940, 1950, 1960, 1970, 1980, 1991, 2000, 2001, 2005, 2007, 2010, 2013, 2014, 2015, 2016, 2017, 2018, 2019 | IBGE | 
|`read_biomes()`| Biomes | 2004, 2019 | IBGE | 

---

# 6.4 Importar dados

## Dados de pacotes: geobr


```r
# list all datasets available in the geobr package
geobr::list_geobr()
```

```
## # A tibble: 23 x 4
##    `function`           geography                     years                                                                        source
##    &lt;chr&gt;                &lt;chr&gt;                         &lt;chr&gt;                                                                        &lt;chr&gt; 
##  1 `read_country`       Country                       1872, 1900, 1911, 1920, 1933, 1940, 1950, 1960, 1970, 1980, 1991, 2000, 200… IBGE  
##  2 `read_region`        Region                        2000, 2001, 2010, 2013, 2014, 2015, 2016, 2017, 2018, 2019                   IBGE  
##  3 `read_state`         States                        1872, 1900, 1911, 1920, 1933, 1940, 1950, 1960, 1970, 1980, 1991, 2000, 200… IBGE  
##  4 `read_meso_region`   Meso region                   2000, 2001, 2010, 2013, 2014, 2015, 2016, 2017, 2018, 2019                   IBGE  
##  5 `read_micro_region`  Micro region                  2000, 2001, 2010, 2013, 2014, 2015, 2016, 2017, 2018, 2019                   IBGE  
##  6 `read_intermediate_… Intermediate region           2017, 2019                                                                   IBGE  
##  7 `read_immediate_reg… Immediate region              2017, 2019                                                                   IBGE  
##  8 `read_weighting_are… Census weighting area (área … 2010                                                                         IBGE  
##  9 `read_census_tract`  Census tract (setor censitár… 2000, 2010, 2017                                                             IBGE  
## 10 `read_municipal_sea… Municipality seats (sedes mu… 1872, 1900, 1911, 1920, 1933, 1940, 1950, 1960, 1970, 1980, 1991, 2010       IBGE  
## # … with 13 more rows
```

---

background-image: url(img/package_ropensci.png)
background-size: 500px
background-position: 50% 55%

# 6.4 Importar dados

## Dados de pacotes: rnaturalearth

```r
# package
install.packages("rnaturalearth")
library(rnaturalearth)
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] http://www.naturalearthdata.com/ 

[*] https://docs.ropensci.org/rnaturalearth/

---

# 6.4 Importar dados

## Dados de pacotes: rnaturalearth

```r
# south america
sa &lt;- rnaturalearth::ne_countries(scale = "small", continent = "South America", returnclass = "sf")
sa
```

```
## Simple feature collection with 13 features and 63 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -81.41094 ymin: -55.61183 xmax: -34.72999 ymax: 12.4373
## CRS:            +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
## First 10 features:
##     scalerank      featurecla labelrank     sovereignt sov_a3 adm0_dif level              type            admin adm0_a3 geou_dif
## 4           1 Admin-0 country         2      Argentina    ARG        0     2 Sovereign country        Argentina     ARG        0
## 21          1 Admin-0 country         3        Bolivia    BOL        0     2 Sovereign country          Bolivia     BOL        0
## 22          1 Admin-0 country         2         Brazil    BRA        0     2 Sovereign country           Brazil     BRA        0
## 29          1 Admin-0 country         2          Chile    CHL        0     2 Sovereign country            Chile     CHL        0
## 35          1 Admin-0 country         2       Colombia    COL        0     2 Sovereign country         Colombia     COL        0
## 46          1 Admin-0 country         3        Ecuador    ECU        0     2 Sovereign country          Ecuador     ECU        0
## 54          1 Admin-0 country         5 United Kingdom    GB1        1     2        Dependency Falkland Islands     FLK        0
## 67          1 Admin-0 country         4         Guyana    GUY        0     2 Sovereign country           Guyana     GUY        0
## 124         1 Admin-0 country         2           Peru    PER        0     2 Sovereign country             Peru     PER        0
## 131         1 Admin-0 country         4       Paraguay    PRY        0     2 Sovereign country         Paraguay     PRY        0
##              geounit gu_a3 su_dif          subunit su_a3 brk_diff         name        name_long brk_a3     brk_name brk_group   abbrev
## 4          Argentina   ARG      0        Argentina   ARG        0    Argentina        Argentina    ARG    Argentina      &lt;NA&gt;     Arg.
## 21           Bolivia   BOL      0          Bolivia   BOL        0      Bolivia          Bolivia    BOL      Bolivia      &lt;NA&gt;  Bolivia
## 22            Brazil   BRA      0           Brazil   BRA        0       Brazil           Brazil    BRA       Brazil      &lt;NA&gt;   Brazil
## 29             Chile   CHL      0            Chile   CHL        0        Chile            Chile    CHL        Chile      &lt;NA&gt;    Chile
## 35          Colombia   COL      0         Colombia   COL        0     Colombia         Colombia    COL     Colombia      &lt;NA&gt;     Col.
## 46           Ecuador   ECU      0          Ecuador   ECU        0      Ecuador          Ecuador    ECU      Ecuador      &lt;NA&gt;     Ecu.
## 54  Falkland Islands   FLK      0 Falkland Islands   FLK        1 Falkland Is. Falkland Islands    B12 Falkland Is.      &lt;NA&gt; Flk. Is.
## 67            Guyana   GUY      0           Guyana   GUY        0       Guyana           Guyana    GUY       Guyana      &lt;NA&gt;     Guy.
## 124             Peru   PER      0             Peru   PER        0         Peru             Peru    PER         Peru      &lt;NA&gt;     Peru
## 131         Paraguay   PRY      0         Paraguay   PRY        0     Paraguay         Paraguay    PRY     Paraguay      &lt;NA&gt;    Para.
##     postal                       formal_en formal_fr note_adm0                             note_brk        name_sort       name_alt
## 4       AR              Argentine Republic      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;        Argentina           &lt;NA&gt;
## 21      BO  Plurinational State of Bolivia      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;          Bolivia           &lt;NA&gt;
## 22      BR   Federative Republic of Brazil      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;           Brazil           &lt;NA&gt;
## 29      CL               Republic of Chile      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;            Chile           &lt;NA&gt;
## 35      CO            Republic of Colombia      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;         Colombia           &lt;NA&gt;
## 46      EC             Republic of Ecuador      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;          Ecuador           &lt;NA&gt;
## 54      FK                Falkland Islands      &lt;NA&gt;      U.K. Admin. by U.K.; Claimed by Argentina Falkland Islands Islas Malvinas
## 67      GY Co-operative Republic of Guyana      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;           Guyana           &lt;NA&gt;
## 124     PE                Republic of Peru      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;             Peru           &lt;NA&gt;
## 131     PY            Republic of Paraguay      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;         Paraguay           &lt;NA&gt;
##     mapcolor7 mapcolor8 mapcolor9 mapcolor13   pop_est gdp_md_est pop_year lastcensus gdp_year                    economy
## 4           3         1         3         13  40913584   573900.0       NA       2010       NA    5. Emerging region: G20
## 21          1         5         2          3   9775246    43270.0       NA       2001       NA    5. Emerging region: G20
## 22          5         6         5          7 198739269  1993000.0       NA       2010       NA   3. Emerging region: BRIC
## 29          5         1         5          9  16601707   244500.0       NA       2002       NA    5. Emerging region: G20
## 35          2         1         3          1  45644023   395400.0       NA       2006       NA       6. Developing region
## 46          1         5         2         12  14573101   107700.0       NA       2010       NA       6. Developing region
## 54          6         6         6          3      3140      105.1       NA         NA       NA 2. Developed region: nonG7
## 67          3         1         4          8    772298     2966.0       NA       2002       NA       6. Developing region
## 124         4         4         4         11  29546963   247300.0       NA       2007       NA    5. Emerging region: G20
## 131         6         3         6          2   6995655    28890.0       NA       2002       NA    5. Emerging region: G20
##                 income_grp wikipedia fips_10 iso_a2 iso_a3 iso_n3 un_a3 wb_a2 wb_a3 woe_id adm0_a3_is adm0_a3_us adm0_a3_un adm0_a3_wb
## 4   3. Upper middle income        NA    &lt;NA&gt;     AR    ARG    032   032    AR   ARG     NA        ARG        ARG         NA         NA
## 21  4. Lower middle income        NA    &lt;NA&gt;     BO    BOL    068   068    BO   BOL     NA        BOL        BOL         NA         NA
## 22  3. Upper middle income        NA    &lt;NA&gt;     BR    BRA    076   076    BR   BRA     NA        BRA        BRA         NA         NA
## 29  3. Upper middle income        NA    &lt;NA&gt;     CL    CHL    152   152    CL   CHL     NA        CHL        CHL         NA         NA
## 35  3. Upper middle income        NA    &lt;NA&gt;     CO    COL    170   170    CO   COL     NA        COL        COL         NA         NA
## 46  3. Upper middle income        NA    &lt;NA&gt;     EC    ECU    218   218    EC   ECU     NA        ECU        ECU         NA         NA
## 54    1. High income: OECD        NA    &lt;NA&gt;     FK    FLK    238   238  &lt;NA&gt;  &lt;NA&gt;     NA        FLK        FLK         NA         NA
## 67  4. Lower middle income        NA    &lt;NA&gt;     GY    GUY    328   328    GY   GUY     NA        GUY        GUY         NA         NA
## 124 3. Upper middle income        NA    &lt;NA&gt;     PE    PER    604   604    PE   PER     NA        PER        PER         NA         NA
## 131 4. Lower middle income        NA    &lt;NA&gt;     PY    PRY    600   600    PY   PRY     NA        PRY        PRY         NA         NA
##         continent region_un     subregion                 region_wb name_len long_len abbrev_len tiny homepart
## 4   South America  Americas South America Latin America &amp; Caribbean        9        9          4   NA        1
## 21  South America  Americas South America Latin America &amp; Caribbean        7        7          7   NA        1
## 22  South America  Americas South America Latin America &amp; Caribbean        6        6          6   NA        1
## 29  South America  Americas South America Latin America &amp; Caribbean        5        5          5   NA        1
## 35  South America  Americas South America Latin America &amp; Caribbean        8        8          4   NA        1
## 46  South America  Americas South America Latin America &amp; Caribbean        7        7          4   NA        1
## 54  South America  Americas South America Latin America &amp; Caribbean       12       16          8   NA       NA
## 67  South America  Americas South America Latin America &amp; Caribbean        6        6          4   NA        1
## 124 South America  Americas South America Latin America &amp; Caribbean        4        4          4   NA        1
## 131 South America  Americas South America Latin America &amp; Caribbean        8        8          5   NA        1
##                           geometry
## 4   MULTIPOLYGON (((-65.5 -55.2...
## 21  MULTIPOLYGON (((-62.84647 -...
## 22  MULTIPOLYGON (((-57.62513 -...
## 29  MULTIPOLYGON (((-68.63401 -...
## 35  MULTIPOLYGON (((-75.37322 -...
## 46  MULTIPOLYGON (((-80.30256 -...
## 54  MULTIPOLYGON (((-61.2 -51.8...
## 67  MULTIPOLYGON (((-59.75828 8...
## 124 MULTIPOLYGON (((-69.59042 -...
## 131 MULTIPOLYGON (((-62.68506 -...
```

---

# 6.4 Importar dados

## Dados de pacotes: rnaturalearth

```r
# plot
plot(sa$geometry, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-58-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.4 Importar dados

## Dados de pacotes: rnaturalearth

```r
# coast lines
coastline &lt;- rnaturalearth::ne_coastline(scale = "small", returnclass = "sf")
coastline
```

```
## Simple feature collection with 134 features and 2 fields
## geometry type:  LINESTRING
## dimension:      XY
## bbox:           xmin: -180 ymin: -85.60904 xmax: 180 ymax: 83.64513
## CRS:            +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
## First 10 features:
##   scalerank featurecla                       geometry
## 0         1  Coastline LINESTRING (-163.7129 -78.5...
## 1         0  Coastline LINESTRING (-6.197885 53.86...
## 2         0  Coastline LINESTRING (141.0002 -2.600...
## 3         0  Coastline LINESTRING (114.204 4.52587...
## 4         1  Coastline LINESTRING (-93.61276 74.98...
## 5         1  Coastline LINESTRING (-93.84 77.52, -...
## 6         1  Coastline LINESTRING (-96.7544 78.765...
## 7         0  Coastline LINESTRING (-88.15035 74.39...
## 8         1  Coastline LINESTRING (-111.2644 78.15...
## 9         1  Coastline LINESTRING (-110.9637 78.80...
```

---

# 6.4 Importar dados

## Dados de pacotes: rnaturalearth

```r
# plot
plot(coastline$geometry, col = "blue", main = NA)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-60-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

# Descrição de objetos sf

---

# 6.5 Descrição de objetos sf

## Informações geográficas e tabela de atributos

```r
# south america
sa
```

```
## Simple feature collection with 13 features and 63 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -81.41094 ymin: -55.61183 xmax: -34.72999 ymax: 12.4373
## CRS:            +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
## First 10 features:
##     scalerank      featurecla labelrank     sovereignt sov_a3 adm0_dif level              type            admin adm0_a3 geou_dif
## 4           1 Admin-0 country         2      Argentina    ARG        0     2 Sovereign country        Argentina     ARG        0
## 21          1 Admin-0 country         3        Bolivia    BOL        0     2 Sovereign country          Bolivia     BOL        0
## 22          1 Admin-0 country         2         Brazil    BRA        0     2 Sovereign country           Brazil     BRA        0
## 29          1 Admin-0 country         2          Chile    CHL        0     2 Sovereign country            Chile     CHL        0
## 35          1 Admin-0 country         2       Colombia    COL        0     2 Sovereign country         Colombia     COL        0
## 46          1 Admin-0 country         3        Ecuador    ECU        0     2 Sovereign country          Ecuador     ECU        0
## 54          1 Admin-0 country         5 United Kingdom    GB1        1     2        Dependency Falkland Islands     FLK        0
## 67          1 Admin-0 country         4         Guyana    GUY        0     2 Sovereign country           Guyana     GUY        0
## 124         1 Admin-0 country         2           Peru    PER        0     2 Sovereign country             Peru     PER        0
## 131         1 Admin-0 country         4       Paraguay    PRY        0     2 Sovereign country         Paraguay     PRY        0
##              geounit gu_a3 su_dif          subunit su_a3 brk_diff         name        name_long brk_a3     brk_name brk_group   abbrev
## 4          Argentina   ARG      0        Argentina   ARG        0    Argentina        Argentina    ARG    Argentina      &lt;NA&gt;     Arg.
## 21           Bolivia   BOL      0          Bolivia   BOL        0      Bolivia          Bolivia    BOL      Bolivia      &lt;NA&gt;  Bolivia
## 22            Brazil   BRA      0           Brazil   BRA        0       Brazil           Brazil    BRA       Brazil      &lt;NA&gt;   Brazil
## 29             Chile   CHL      0            Chile   CHL        0        Chile            Chile    CHL        Chile      &lt;NA&gt;    Chile
## 35          Colombia   COL      0         Colombia   COL        0     Colombia         Colombia    COL     Colombia      &lt;NA&gt;     Col.
## 46           Ecuador   ECU      0          Ecuador   ECU        0      Ecuador          Ecuador    ECU      Ecuador      &lt;NA&gt;     Ecu.
## 54  Falkland Islands   FLK      0 Falkland Islands   FLK        1 Falkland Is. Falkland Islands    B12 Falkland Is.      &lt;NA&gt; Flk. Is.
## 67            Guyana   GUY      0           Guyana   GUY        0       Guyana           Guyana    GUY       Guyana      &lt;NA&gt;     Guy.
## 124             Peru   PER      0             Peru   PER        0         Peru             Peru    PER         Peru      &lt;NA&gt;     Peru
## 131         Paraguay   PRY      0         Paraguay   PRY        0     Paraguay         Paraguay    PRY     Paraguay      &lt;NA&gt;    Para.
##     postal                       formal_en formal_fr note_adm0                             note_brk        name_sort       name_alt
## 4       AR              Argentine Republic      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;        Argentina           &lt;NA&gt;
## 21      BO  Plurinational State of Bolivia      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;          Bolivia           &lt;NA&gt;
## 22      BR   Federative Republic of Brazil      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;           Brazil           &lt;NA&gt;
## 29      CL               Republic of Chile      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;            Chile           &lt;NA&gt;
## 35      CO            Republic of Colombia      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;         Colombia           &lt;NA&gt;
## 46      EC             Republic of Ecuador      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;          Ecuador           &lt;NA&gt;
## 54      FK                Falkland Islands      &lt;NA&gt;      U.K. Admin. by U.K.; Claimed by Argentina Falkland Islands Islas Malvinas
## 67      GY Co-operative Republic of Guyana      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;           Guyana           &lt;NA&gt;
## 124     PE                Republic of Peru      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;             Peru           &lt;NA&gt;
## 131     PY            Republic of Paraguay      &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;         Paraguay           &lt;NA&gt;
##     mapcolor7 mapcolor8 mapcolor9 mapcolor13   pop_est gdp_md_est pop_year lastcensus gdp_year                    economy
## 4           3         1         3         13  40913584   573900.0       NA       2010       NA    5. Emerging region: G20
## 21          1         5         2          3   9775246    43270.0       NA       2001       NA    5. Emerging region: G20
## 22          5         6         5          7 198739269  1993000.0       NA       2010       NA   3. Emerging region: BRIC
## 29          5         1         5          9  16601707   244500.0       NA       2002       NA    5. Emerging region: G20
## 35          2         1         3          1  45644023   395400.0       NA       2006       NA       6. Developing region
## 46          1         5         2         12  14573101   107700.0       NA       2010       NA       6. Developing region
## 54          6         6         6          3      3140      105.1       NA         NA       NA 2. Developed region: nonG7
## 67          3         1         4          8    772298     2966.0       NA       2002       NA       6. Developing region
## 124         4         4         4         11  29546963   247300.0       NA       2007       NA    5. Emerging region: G20
## 131         6         3         6          2   6995655    28890.0       NA       2002       NA    5. Emerging region: G20
##                 income_grp wikipedia fips_10 iso_a2 iso_a3 iso_n3 un_a3 wb_a2 wb_a3 woe_id adm0_a3_is adm0_a3_us adm0_a3_un adm0_a3_wb
## 4   3. Upper middle income        NA    &lt;NA&gt;     AR    ARG    032   032    AR   ARG     NA        ARG        ARG         NA         NA
## 21  4. Lower middle income        NA    &lt;NA&gt;     BO    BOL    068   068    BO   BOL     NA        BOL        BOL         NA         NA
## 22  3. Upper middle income        NA    &lt;NA&gt;     BR    BRA    076   076    BR   BRA     NA        BRA        BRA         NA         NA
## 29  3. Upper middle income        NA    &lt;NA&gt;     CL    CHL    152   152    CL   CHL     NA        CHL        CHL         NA         NA
## 35  3. Upper middle income        NA    &lt;NA&gt;     CO    COL    170   170    CO   COL     NA        COL        COL         NA         NA
## 46  3. Upper middle income        NA    &lt;NA&gt;     EC    ECU    218   218    EC   ECU     NA        ECU        ECU         NA         NA
## 54    1. High income: OECD        NA    &lt;NA&gt;     FK    FLK    238   238  &lt;NA&gt;  &lt;NA&gt;     NA        FLK        FLK         NA         NA
## 67  4. Lower middle income        NA    &lt;NA&gt;     GY    GUY    328   328    GY   GUY     NA        GUY        GUY         NA         NA
## 124 3. Upper middle income        NA    &lt;NA&gt;     PE    PER    604   604    PE   PER     NA        PER        PER         NA         NA
## 131 4. Lower middle income        NA    &lt;NA&gt;     PY    PRY    600   600    PY   PRY     NA        PRY        PRY         NA         NA
##         continent region_un     subregion                 region_wb name_len long_len abbrev_len tiny homepart
## 4   South America  Americas South America Latin America &amp; Caribbean        9        9          4   NA        1
## 21  South America  Americas South America Latin America &amp; Caribbean        7        7          7   NA        1
## 22  South America  Americas South America Latin America &amp; Caribbean        6        6          6   NA        1
## 29  South America  Americas South America Latin America &amp; Caribbean        5        5          5   NA        1
## 35  South America  Americas South America Latin America &amp; Caribbean        8        8          4   NA        1
## 46  South America  Americas South America Latin America &amp; Caribbean        7        7          4   NA        1
## 54  South America  Americas South America Latin America &amp; Caribbean       12       16          8   NA       NA
## 67  South America  Americas South America Latin America &amp; Caribbean        6        6          4   NA        1
## 124 South America  Americas South America Latin America &amp; Caribbean        4        4          4   NA        1
## 131 South America  Americas South America Latin America &amp; Caribbean        8        8          5   NA        1
##                           geometry
## 4   MULTIPOLYGON (((-65.5 -55.2...
## 21  MULTIPOLYGON (((-62.84647 -...
## 22  MULTIPOLYGON (((-57.62513 -...
## 29  MULTIPOLYGON (((-68.63401 -...
## 35  MULTIPOLYGON (((-75.37322 -...
## 46  MULTIPOLYGON (((-80.30256 -...
## 54  MULTIPOLYGON (((-61.2 -51.8...
## 67  MULTIPOLYGON (((-59.75828 8...
## 124 MULTIPOLYGON (((-69.59042 -...
## 131 MULTIPOLYGON (((-62.68506 -...
```

---

# 6.5 Descrição de objetos sf

## Informações geográficas

### Geometry type

```r
# geometry
sf::st_geometry_type(sa)
```

```
##  [1] MULTIPOLYGON MULTIPOLYGON MULTIPOLYGON MULTIPOLYGON MULTIPOLYGON MULTIPOLYGON MULTIPOLYGON MULTIPOLYGON MULTIPOLYGON MULTIPOLYGON
## [11] MULTIPOLYGON MULTIPOLYGON MULTIPOLYGON
## 18 Levels: GEOMETRY POINT LINESTRING POLYGON MULTIPOINT MULTILINESTRING MULTIPOLYGON GEOMETRYCOLLECTION CIRCULARSTRING ... TRIANGLE
```

--

### Bounding box

```r
# extention
sf::st_bbox(sa)
```

```
##      xmin      ymin      xmax      ymax 
## -81.41094 -55.61183 -34.72999  12.43730
```

---

# 6.5 Descrição de objetos sf

## Informações geográficas

### Coordinate reference system

```r
# coordinate reference system
sf::st_crs(sa)
```

```
## Coordinate Reference System:
##   User input: +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0 
##   wkt:
## BOUNDCRS[
##     SOURCECRS[
##         GEOGCRS["unknown",
##             DATUM["World Geodetic System 1984",
##                 ELLIPSOID["WGS 84",6378137,298.257223563,
##                     LENGTHUNIT["metre",1]],
##                 ID["EPSG",6326]],
##             PRIMEM["Greenwich",0,
##                 ANGLEUNIT["degree",0.0174532925199433],
##                 ID["EPSG",8901]],
##             CS[ellipsoidal,2],
##                 AXIS["longitude",east,
##                     ORDER[1],
##                     ANGLEUNIT["degree",0.0174532925199433,
##                         ID["EPSG",9122]]],
##                 AXIS["latitude",north,
##                     ORDER[2],
##                     ANGLEUNIT["degree",0.0174532925199433,
##                         ID["EPSG",9122]]]]],
##     TARGETCRS[
##         GEOGCRS["WGS 84",
##             DATUM["World Geodetic System 1984",
##                 ELLIPSOID["WGS 84",6378137,298.257223563,
##                     LENGTHUNIT["metre",1]]],
##             PRIMEM["Greenwich",0,
##                 ANGLEUNIT["degree",0.0174532925199433]],
##             CS[ellipsoidal,2],
##                 AXIS["latitude",north,
##                     ORDER[1],
##                     ANGLEUNIT["degree",0.0174532925199433]],
##                 AXIS["longitude",east,
##                     ORDER[2],
##                     ANGLEUNIT["degree",0.0174532925199433]],
##             ID["EPSG",4326]]],
##     ABRIDGEDTRANSFORMATION["Transformation from unknown to WGS84",
##         METHOD["Geocentric translations (geog2D domain)",
##             ID["EPSG",9603]],
##         PARAMETER["X-axis translation",0,
##             ID["EPSG",8605]],
##         PARAMETER["Y-axis translation",0,
##             ID["EPSG",8606]],
##         PARAMETER["Z-axis translation",0,
##             ID["EPSG",8607]]]]
```

---

background-image: url(img/geo_vector_attribute_table.png)
background-size: 450px
background-position: 45% 80%

# 6.5 Descrição de objetos sf

## Tabela de atributos

### Relação entre a geometria e suas características

---

# 6.5 Descrição de objetos sf

## Tabela de atributos

### Acessar a tabela de atributos de um `sf`

```r
# acessar a tabela de atributos
sa_tab &lt;- sf::st_drop_geometry(sa)
sa_tab
```

```
##     scalerank      featurecla labelrank     sovereignt sov_a3 adm0_dif level              type            admin adm0_a3 geou_dif
## 4           1 Admin-0 country         2      Argentina    ARG        0     2 Sovereign country        Argentina     ARG        0
## 21          1 Admin-0 country         3        Bolivia    BOL        0     2 Sovereign country          Bolivia     BOL        0
## 22          1 Admin-0 country         2         Brazil    BRA        0     2 Sovereign country           Brazil     BRA        0
## 29          1 Admin-0 country         2          Chile    CHL        0     2 Sovereign country            Chile     CHL        0
## 35          1 Admin-0 country         2       Colombia    COL        0     2 Sovereign country         Colombia     COL        0
## 46          1 Admin-0 country         3        Ecuador    ECU        0     2 Sovereign country          Ecuador     ECU        0
## 54          1 Admin-0 country         5 United Kingdom    GB1        1     2        Dependency Falkland Islands     FLK        0
## 67          1 Admin-0 country         4         Guyana    GUY        0     2 Sovereign country           Guyana     GUY        0
## 124         1 Admin-0 country         2           Peru    PER        0     2 Sovereign country             Peru     PER        0
## 131         1 Admin-0 country         4       Paraguay    PRY        0     2 Sovereign country         Paraguay     PRY        0
## 148         1 Admin-0 country         4       Suriname    SUR        0     2 Sovereign country         Suriname     SUR        0
## 167         1 Admin-0 country         4        Uruguay    URY        0     2 Sovereign country          Uruguay     URY        0
## 170         1 Admin-0 country         3      Venezuela    VEN        0     2 Sovereign country        Venezuela     VEN        0
##              geounit gu_a3 su_dif          subunit su_a3 brk_diff         name        name_long brk_a3     brk_name brk_group   abbrev
## 4          Argentina   ARG      0        Argentina   ARG        0    Argentina        Argentina    ARG    Argentina      &lt;NA&gt;     Arg.
## 21           Bolivia   BOL      0          Bolivia   BOL        0      Bolivia          Bolivia    BOL      Bolivia      &lt;NA&gt;  Bolivia
## 22            Brazil   BRA      0           Brazil   BRA        0       Brazil           Brazil    BRA       Brazil      &lt;NA&gt;   Brazil
## 29             Chile   CHL      0            Chile   CHL        0        Chile            Chile    CHL        Chile      &lt;NA&gt;    Chile
## 35          Colombia   COL      0         Colombia   COL        0     Colombia         Colombia    COL     Colombia      &lt;NA&gt;     Col.
## 46           Ecuador   ECU      0          Ecuador   ECU        0      Ecuador          Ecuador    ECU      Ecuador      &lt;NA&gt;     Ecu.
## 54  Falkland Islands   FLK      0 Falkland Islands   FLK        1 Falkland Is. Falkland Islands    B12 Falkland Is.      &lt;NA&gt; Flk. Is.
## 67            Guyana   GUY      0           Guyana   GUY        0       Guyana           Guyana    GUY       Guyana      &lt;NA&gt;     Guy.
## 124             Peru   PER      0             Peru   PER        0         Peru             Peru    PER         Peru      &lt;NA&gt;     Peru
## 131         Paraguay   PRY      0         Paraguay   PRY        0     Paraguay         Paraguay    PRY     Paraguay      &lt;NA&gt;    Para.
## 148         Suriname   SUR      0         Suriname   SUR        0     Suriname         Suriname    SUR     Suriname      &lt;NA&gt;     Sur.
## 167          Uruguay   URY      0          Uruguay   URY        0      Uruguay          Uruguay    URY      Uruguay      &lt;NA&gt;     Ury.
## 170        Venezuela   VEN      0        Venezuela   VEN        0    Venezuela        Venezuela    VEN    Venezuela      &lt;NA&gt;     Ven.
##     postal                        formal_en                          formal_fr note_adm0                             note_brk
## 4       AR               Argentine Republic                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 21      BO   Plurinational State of Bolivia                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 22      BR    Federative Republic of Brazil                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 29      CL                Republic of Chile                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 35      CO             Republic of Colombia                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 46      EC              Republic of Ecuador                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 54      FK                 Falkland Islands                               &lt;NA&gt;      U.K. Admin. by U.K.; Claimed by Argentina
## 67      GY  Co-operative Republic of Guyana                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 124     PE                 Republic of Peru                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 131     PY             Republic of Paraguay                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 148     SR             Republic of Suriname                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 167     UY     Oriental Republic of Uruguay                               &lt;NA&gt;      &lt;NA&gt;                                 &lt;NA&gt;
## 170     VE Bolivarian Republic of Venezuela República Bolivariana de Venezuela      &lt;NA&gt;                                 &lt;NA&gt;
##            name_sort       name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13   pop_est gdp_md_est pop_year lastcensus gdp_year
## 4          Argentina           &lt;NA&gt;         3         1         3         13  40913584   573900.0       NA       2010       NA
## 21           Bolivia           &lt;NA&gt;         1         5         2          3   9775246    43270.0       NA       2001       NA
## 22            Brazil           &lt;NA&gt;         5         6         5          7 198739269  1993000.0       NA       2010       NA
## 29             Chile           &lt;NA&gt;         5         1         5          9  16601707   244500.0       NA       2002       NA
## 35          Colombia           &lt;NA&gt;         2         1         3          1  45644023   395400.0       NA       2006       NA
## 46           Ecuador           &lt;NA&gt;         1         5         2         12  14573101   107700.0       NA       2010       NA
## 54  Falkland Islands Islas Malvinas         6         6         6          3      3140      105.1       NA         NA       NA
## 67            Guyana           &lt;NA&gt;         3         1         4          8    772298     2966.0       NA       2002       NA
## 124             Peru           &lt;NA&gt;         4         4         4         11  29546963   247300.0       NA       2007       NA
## 131         Paraguay           &lt;NA&gt;         6         3         6          2   6995655    28890.0       NA       2002       NA
## 148         Suriname           &lt;NA&gt;         1         4         7          6    481267     4254.0       NA       2004       NA
## 167          Uruguay           &lt;NA&gt;         1         2         2         10   3494382    43160.0       NA       2004       NA
## 170    Venezuela, RB           &lt;NA&gt;         1         3         1          4  26814843   357400.0       NA       2001       NA
##                        economy             income_grp wikipedia fips_10 iso_a2 iso_a3 iso_n3 un_a3 wb_a2 wb_a3 woe_id adm0_a3_is
## 4      5. Emerging region: G20 3. Upper middle income        NA    &lt;NA&gt;     AR    ARG    032   032    AR   ARG     NA        ARG
## 21     5. Emerging region: G20 4. Lower middle income        NA    &lt;NA&gt;     BO    BOL    068   068    BO   BOL     NA        BOL
## 22    3. Emerging region: BRIC 3. Upper middle income        NA    &lt;NA&gt;     BR    BRA    076   076    BR   BRA     NA        BRA
## 29     5. Emerging region: G20 3. Upper middle income        NA    &lt;NA&gt;     CL    CHL    152   152    CL   CHL     NA        CHL
## 35        6. Developing region 3. Upper middle income        NA    &lt;NA&gt;     CO    COL    170   170    CO   COL     NA        COL
## 46        6. Developing region 3. Upper middle income        NA    &lt;NA&gt;     EC    ECU    218   218    EC   ECU     NA        ECU
## 54  2. Developed region: nonG7   1. High income: OECD        NA    &lt;NA&gt;     FK    FLK    238   238  &lt;NA&gt;  &lt;NA&gt;     NA        FLK
## 67        6. Developing region 4. Lower middle income        NA    &lt;NA&gt;     GY    GUY    328   328    GY   GUY     NA        GUY
## 124    5. Emerging region: G20 3. Upper middle income        NA    &lt;NA&gt;     PE    PER    604   604    PE   PER     NA        PER
## 131    5. Emerging region: G20 4. Lower middle income        NA    &lt;NA&gt;     PY    PRY    600   600    PY   PRY     NA        PRY
## 148       6. Developing region 3. Upper middle income        NA    &lt;NA&gt;     SR    SUR    740   740    SR   SUR     NA        SUR
## 167    5. Emerging region: G20 3. Upper middle income        NA    &lt;NA&gt;     UY    URY    858   858    UY   URY     NA        URY
## 170    5. Emerging region: G20 3. Upper middle income        NA    &lt;NA&gt;     VE    VEN    862   862    VE   VEN     NA        VEN
##     adm0_a3_us adm0_a3_un adm0_a3_wb     continent region_un     subregion                 region_wb name_len long_len abbrev_len tiny
## 4          ARG         NA         NA South America  Americas South America Latin America &amp; Caribbean        9        9          4   NA
## 21         BOL         NA         NA South America  Americas South America Latin America &amp; Caribbean        7        7          7   NA
## 22         BRA         NA         NA South America  Americas South America Latin America &amp; Caribbean        6        6          6   NA
## 29         CHL         NA         NA South America  Americas South America Latin America &amp; Caribbean        5        5          5   NA
## 35         COL         NA         NA South America  Americas South America Latin America &amp; Caribbean        8        8          4   NA
## 46         ECU         NA         NA South America  Americas South America Latin America &amp; Caribbean        7        7          4   NA
## 54         FLK         NA         NA South America  Americas South America Latin America &amp; Caribbean       12       16          8   NA
## 67         GUY         NA         NA South America  Americas South America Latin America &amp; Caribbean        6        6          4   NA
## 124        PER         NA         NA South America  Americas South America Latin America &amp; Caribbean        4        4          4   NA
## 131        PRY         NA         NA South America  Americas South America Latin America &amp; Caribbean        8        8          5   NA
## 148        SUR         NA         NA South America  Americas South America Latin America &amp; Caribbean        8        8          4   NA
## 167        URY         NA         NA South America  Americas South America Latin America &amp; Caribbean        7        7          4   NA
## 170        VEN         NA         NA South America  Americas South America Latin America &amp; Caribbean        9        9          4   NA
##     homepart
## 4          1
## 21         1
## 22         1
## 29         1
## 35         1
## 46         1
## 54        NA
## 67         1
## 124        1
## 131        1
## 148        1
## 167        1
## 170        1
```


```r
# classe
class(sa_tab)
```

```
## [1] "data.frame"
```

---

class: inverse, center, middle

# Importar dados de planilhas eletrônicas e converter em sf

---

# 6.6 Converter dados sf

## Dados de uma planilha eletrônica

```r
# import table
si &lt;- readr::read_csv(here::here("03_dados", "tabelas", "ATLANTIC_AMPHIBIANS_sites.csv"))
si
```

```
## # A tibble: 1,163 x 25
##    id    reference_number species_number record sampled_habitat active_methods passive_methods complementary_m… period month_start
##    &lt;chr&gt;            &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;            &lt;chr&gt;        &lt;dbl&gt;
##  1 amp1…             1001             19 ab     fo,ll           as             pt              &lt;NA&gt;             mo,da…           9
##  2 amp1…             1002             16 co     fo,la,ll        as             pt              &lt;NA&gt;             mo,da…          12
##  3 amp1…             1002             14 co     fo,la,ll        as             pt              &lt;NA&gt;             mo,da…          12
##  4 amp1…             1002             13 co     fo,la,ll        as             pt              &lt;NA&gt;             mo,da…          12
##  5 amp1…             1003             30 co     fo,ll,br        as             &lt;NA&gt;            &lt;NA&gt;             mo,da…           7
##  6 amp1…             1004             42 co     tp,pp,la,ll,is  &lt;NA&gt;           &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;            NA
##  7 amp1…             1005             23 co     sp              as             &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;             4
##  8 amp1…             1005             19 co     sp,la,sw        as,sb,tr       &lt;NA&gt;            &lt;NA&gt;             tw,ni            4
##  9 amp1…             1005             13 ab     fo              &lt;NA&gt;           pt              &lt;NA&gt;             mo,da…           4
## 10 amp1…             1006              1 ab     fo              &lt;NA&gt;           pt              &lt;NA&gt;             mo,da…           5
## # … with 1,153 more rows, and 15 more variables: year_start &lt;dbl&gt;, month_finish &lt;dbl&gt;, year_finish &lt;dbl&gt;, effort_months &lt;dbl&gt;,
## #   country &lt;chr&gt;, state &lt;chr&gt;, state_abbreviation &lt;chr&gt;, municipality &lt;chr&gt;, site &lt;chr&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
## #   coordinate_precision &lt;chr&gt;, altitude &lt;dbl&gt;, temperature &lt;dbl&gt;, precipitation &lt;dbl&gt;
```

---

# 6.6 Converter dados sf

## Add as duas colunas de `lon` e `lat`

```r
# add column
si &lt;- si %&gt;% 
  dplyr::mutate(lon = longitude, lat = latitude, .before = 1)
si
```

```
## # A tibble: 1,163 x 27
##      lon   lat id    reference_number species_number record sampled_habitat active_methods passive_methods complementary_m… period
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;            &lt;chr&gt; 
##  1 -43.4 -8.68 amp1…             1001             19 ab     fo,ll           as             pt              &lt;NA&gt;             mo,da…
##  2 -38.9 -3.55 amp1…             1002             16 co     fo,la,ll        as             pt              &lt;NA&gt;             mo,da…
##  3 -38.9 -3.57 amp1…             1002             14 co     fo,la,ll        as             pt              &lt;NA&gt;             mo,da…
##  4 -38.9 -3.52 amp1…             1002             13 co     fo,la,ll        as             pt              &lt;NA&gt;             mo,da…
##  5 -38.9 -4.28 amp1…             1003             30 co     fo,ll,br        as             &lt;NA&gt;            &lt;NA&gt;             mo,da…
##  6 -36.4 -9.23 amp1…             1004             42 co     tp,pp,la,ll,is  &lt;NA&gt;           &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;  
##  7 -40.9 -3.85 amp1…             1005             23 co     sp              as             &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;  
##  8 -40.9 -3.83 amp1…             1005             19 co     sp,la,sw        as,sb,tr       &lt;NA&gt;            &lt;NA&gt;             tw,ni 
##  9 -40.9 -3.84 amp1…             1005             13 ab     fo              &lt;NA&gt;           pt              &lt;NA&gt;             mo,da…
## 10 -35.2 -6.14 amp1…             1006              1 ab     fo              &lt;NA&gt;           pt              &lt;NA&gt;             mo,da…
## # … with 1,153 more rows, and 16 more variables: month_start &lt;dbl&gt;, year_start &lt;dbl&gt;, month_finish &lt;dbl&gt;, year_finish &lt;dbl&gt;,
## #   effort_months &lt;dbl&gt;, country &lt;chr&gt;, state &lt;chr&gt;, state_abbreviation &lt;chr&gt;, municipality &lt;chr&gt;, site &lt;chr&gt;, latitude &lt;dbl&gt;,
## #   longitude &lt;dbl&gt;, coordinate_precision &lt;chr&gt;, altitude &lt;dbl&gt;, temperature &lt;dbl&gt;, precipitation &lt;dbl&gt;
```

---

# 6.6 Converter dados sf

## Converter dados de planilhas em sf

```r
# convert to sf
si_ve &lt;- si %&gt;% 
  sf::st_as_sf(coords = c("lon", "lat"), crs = 4326)
si_ve
```

```
## Simple feature collection with 1163 features and 25 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -56.74194 ymin: -33.51083 xmax: -34.79667 ymax: -3.51525
## geographic CRS: WGS 84
## # A tibble: 1,163 x 26
##    id    reference_number species_number record sampled_habitat active_methods passive_methods complementary_m… period month_start
##  * &lt;chr&gt;            &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;            &lt;chr&gt;        &lt;dbl&gt;
##  1 amp1…             1001             19 ab     fo,ll           as             pt              &lt;NA&gt;             mo,da…           9
##  2 amp1…             1002             16 co     fo,la,ll        as             pt              &lt;NA&gt;             mo,da…          12
##  3 amp1…             1002             14 co     fo,la,ll        as             pt              &lt;NA&gt;             mo,da…          12
##  4 amp1…             1002             13 co     fo,la,ll        as             pt              &lt;NA&gt;             mo,da…          12
##  5 amp1…             1003             30 co     fo,ll,br        as             &lt;NA&gt;            &lt;NA&gt;             mo,da…           7
##  6 amp1…             1004             42 co     tp,pp,la,ll,is  &lt;NA&gt;           &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;            NA
##  7 amp1…             1005             23 co     sp              as             &lt;NA&gt;            &lt;NA&gt;             &lt;NA&gt;             4
##  8 amp1…             1005             19 co     sp,la,sw        as,sb,tr       &lt;NA&gt;            &lt;NA&gt;             tw,ni            4
##  9 amp1…             1005             13 ab     fo              &lt;NA&gt;           pt              &lt;NA&gt;             mo,da…           4
## 10 amp1…             1006              1 ab     fo              &lt;NA&gt;           pt              &lt;NA&gt;             mo,da…           5
## # … with 1,153 more rows, and 16 more variables: year_start &lt;dbl&gt;, month_finish &lt;dbl&gt;, year_finish &lt;dbl&gt;, effort_months &lt;dbl&gt;,
## #   country &lt;chr&gt;, state &lt;chr&gt;, state_abbreviation &lt;chr&gt;, municipality &lt;chr&gt;, site &lt;chr&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
## #   coordinate_precision &lt;chr&gt;, altitude &lt;dbl&gt;, temperature &lt;dbl&gt;, precipitation &lt;dbl&gt;, geometry &lt;POINT [°]&gt;
```

---

# 6.6 Converter dados sf

## Converter dados de planilhas em sf

```r
# plot
plot(si_ve$geometry, pch = 20, main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-70-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

background-image: url(img/geo_sp.png),url(img/geo_sp_dep.png)
background-size: 250px,700px
background-position: 90% 18%,50% 95%

# 6.6 Converter dados sf

## Tipos de objetos `sp`
- SpatialPoints 
- SpatialLines
- SpatialPolygons
- SpatialPointsDataFrame
- SpatialLinesDataFrame
- SpatialPolygonsDataFrame

---

# 6.6 Converter dados sf

## Dados `sp`

```r
# countries sp
co110_sp &lt;- rnaturalearth::countries110
co110_sp
```

```
## class       : SpatialPolygonsDataFrame 
## features    : 177 
## extent      : -180, 180, -90, 83.64513  (xmin, xmax, ymin, ymax)
## crs         : +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0 
## variables   : 63
## names       : scalerank,      featurecla, labelrank,  sovereignt, sov_a3, adm0_dif, level,              type,       admin, adm0_a3, geou_dif,     geounit, gu_a3, su_dif,     subunit, ... 
## min values  :         1, Admin-0 country,         2, Afghanistan,    AFG,        0,     2,           Country, Afghanistan,     AFG,        0, Afghanistan,   AFG,      0, Afghanistan, ... 
## max values  :         3, Admin-0 country,         7,    Zimbabwe,    ZWE,        1,     2, Sovereign country,    Zimbabwe,     ZWE,        0,    Zimbabwe,   ZWE,      1,    Zimbabwe, ...
```

---

# 6.6 Converter dados sf

## Converter `sp` para `sf`

```r
# countries sf
co110_sf &lt;- sf::st_as_sf(co110_sp)
co110_sf
```

```
## Simple feature collection with 177 features and 63 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -180 ymin: -90 xmax: 180 ymax: 83.64513
## CRS:            +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
## First 10 features:
##   scalerank      featurecla labelrank           sovereignt sov_a3 adm0_dif level              type                               admin
## 0         1 Admin-0 country         3          Afghanistan    AFG        0     2 Sovereign country                         Afghanistan
## 1         1 Admin-0 country         3               Angola    AGO        0     2 Sovereign country                              Angola
## 2         1 Admin-0 country         6              Albania    ALB        0     2 Sovereign country                             Albania
## 3         1 Admin-0 country         4 United Arab Emirates    ARE        0     2 Sovereign country                United Arab Emirates
## 4         1 Admin-0 country         2            Argentina    ARG        0     2 Sovereign country                           Argentina
## 5         1 Admin-0 country         6              Armenia    ARM        0     2 Sovereign country                             Armenia
## 6         1 Admin-0 country         4           Antarctica    ATA        0     2     Indeterminate                          Antarctica
## 7         3 Admin-0 country         6               France    FR1        1     2        Dependency French Southern and Antarctic Lands
## 8         1 Admin-0 country         2            Australia    AU1        1     2           Country                           Australia
## 9         1 Admin-0 country         4              Austria    AUT        0     2 Sovereign country                             Austria
##   adm0_a3 geou_dif                             geounit gu_a3 su_dif                             subunit su_a3 brk_diff
## 0     AFG        0                         Afghanistan   AFG      0                         Afghanistan   AFG        0
## 1     AGO        0                              Angola   AGO      0                              Angola   AGO        0
## 2     ALB        0                             Albania   ALB      0                             Albania   ALB        0
## 3     ARE        0                United Arab Emirates   ARE      0                United Arab Emirates   ARE        0
## 4     ARG        0                           Argentina   ARG      0                           Argentina   ARG        0
## 5     ARM        0                             Armenia   ARM      0                             Armenia   ARM        0
## 6     ATA        0                          Antarctica   ATA      0                          Antarctica   ATA        0
## 7     ATF        0 French Southern and Antarctic Lands   ATF      0 French Southern and Antarctic Lands   ATF        0
## 8     AUS        0                           Australia   AUS      0                           Australia   AUS        0
## 9     AUT        0                             Austria   AUT      0                             Austria   AUT        0
##                     name                           name_long brk_a3                   brk_name brk_group     abbrev postal
## 0            Afghanistan                         Afghanistan    AFG                Afghanistan      &lt;NA&gt;       Afg.     AF
## 1                 Angola                              Angola    AGO                     Angola      &lt;NA&gt;       Ang.     AO
## 2                Albania                             Albania    ALB                    Albania      &lt;NA&gt;       Alb.     AL
## 3   United Arab Emirates                United Arab Emirates    ARE       United Arab Emirates      &lt;NA&gt;     U.A.E.     AE
## 4              Argentina                           Argentina    ARG                  Argentina      &lt;NA&gt;       Arg.     AR
## 5                Armenia                             Armenia    ARM                    Armenia      &lt;NA&gt;       Arm.    ARM
## 6             Antarctica                          Antarctica    ATA                 Antarctica      &lt;NA&gt;       Ant.     AQ
## 7 Fr. S. Antarctic Lands French Southern and Antarctic Lands    ATF Fr. S. and Antarctic Lands      &lt;NA&gt; Fr. S.A.L.     TF
## 8              Australia                           Australia    AUS                  Australia      &lt;NA&gt;       Auz.     AU
## 9                Austria                             Austria    AUT                    Austria      &lt;NA&gt;      Aust.      A
##                                              formal_en formal_fr note_adm0                         note_brk
## 0                         Islamic State of Afghanistan      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 1                          People's Republic of Angola      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 2                                  Republic of Albania      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 3                                 United Arab Emirates      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 4                                   Argentine Republic      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 5                                  Republic of Armenia      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 6                                                 &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; Multiple claims held in abeyance
## 7 Territory of the French Southern and Antarctic Lands      &lt;NA&gt;       Fr.                             &lt;NA&gt;
## 8                            Commonwealth of Australia      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 9                                  Republic of Austria      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
##                             name_sort name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13  pop_est gdp_md_est pop_year lastcensus gdp_year
## 0                         Afghanistan     &lt;NA&gt;         5         6         8          7 28400000    22270.0       NA       1979       NA
## 1                              Angola     &lt;NA&gt;         3         2         6          1 12799293   110300.0       NA       1970       NA
## 2                             Albania     &lt;NA&gt;         1         4         1          6  3639453    21810.0       NA       2001       NA
## 3                United Arab Emirates     &lt;NA&gt;         2         1         3          3  4798491   184300.0       NA       2010       NA
## 4                           Argentina     &lt;NA&gt;         3         1         3         13 40913584   573900.0       NA       2010       NA
## 5                             Armenia     &lt;NA&gt;         3         1         2         10  2967004    18770.0       NA       2001       NA
## 6                          Antarctica     &lt;NA&gt;         4         5         1         NA     3802      760.4       NA         NA       NA
## 7 French Southern and Antarctic Lands     &lt;NA&gt;         7         5         9         11      140       16.0       NA         NA       NA
## 8                           Australia     &lt;NA&gt;         1         2         2          7 21262641   800200.0       NA       2006       NA
## 9                             Austria     &lt;NA&gt;         3         1         3          4  8210281   329500.0       NA       2011       NA
##                      economy              income_grp wikipedia fips_10 iso_a2 iso_a3 iso_n3 un_a3 wb_a2 wb_a3 woe_id adm0_a3_is
## 0  7. Least developed region           5. Low income        NA    &lt;NA&gt;     AF    AFG    004   004    AF   AFG     NA        AFG
## 1  7. Least developed region  3. Upper middle income        NA    &lt;NA&gt;     AO    AGO    024   024    AO   AGO     NA        AGO
## 2       6. Developing region  4. Lower middle income        NA    &lt;NA&gt;     AL    ALB    008   008    AL   ALB     NA        ALB
## 3       6. Developing region 2. High income: nonOECD        NA    &lt;NA&gt;     AE    ARE    784   784    AE   ARE     NA        ARE
## 4    5. Emerging region: G20  3. Upper middle income        NA    &lt;NA&gt;     AR    ARG    032   032    AR   ARG     NA        ARG
## 5       6. Developing region  4. Lower middle income        NA    &lt;NA&gt;     AM    ARM    051   051    AM   ARM     NA        ARM
## 6       6. Developing region 2. High income: nonOECD        NA    &lt;NA&gt;     AQ    ATA    010  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     NA        ATA
## 7       6. Developing region 2. High income: nonOECD        NA    &lt;NA&gt;     TF    ATF    260  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     NA        ATF
## 8 2. Developed region: nonG7    1. High income: OECD        NA    &lt;NA&gt;     AU    AUS    036   036    AU   AUS     NA        AUS
## 9 2. Developed region: nonG7    1. High income: OECD        NA    &lt;NA&gt;     AT    AUT    040   040    AT   AUT     NA        AUT
##   adm0_a3_us adm0_a3_un adm0_a3_wb               continent               region_un                 subregion                  region_wb
## 0        AFG         NA         NA                    Asia                    Asia             Southern Asia                 South Asia
## 1        AGO         NA         NA                  Africa                  Africa             Middle Africa         Sub-Saharan Africa
## 2        ALB         NA         NA                  Europe                  Europe           Southern Europe      Europe &amp; Central Asia
## 3        ARE         NA         NA                    Asia                    Asia              Western Asia Middle East &amp; North Africa
## 4        ARG         NA         NA           South America                Americas             South America  Latin America &amp; Caribbean
## 5        ARM         NA         NA                    Asia                    Asia              Western Asia      Europe &amp; Central Asia
## 6        ATA         NA         NA              Antarctica              Antarctica                Antarctica                 Antarctica
## 7        ATF         NA         NA Seven seas (open ocean) Seven seas (open ocean)   Seven seas (open ocean)         Sub-Saharan Africa
## 8        AUS         NA         NA                 Oceania                 Oceania Australia and New Zealand        East Asia &amp; Pacific
## 9        AUT         NA         NA                  Europe                  Europe            Western Europe      Europe &amp; Central Asia
##   name_len long_len abbrev_len tiny homepart                       geometry
## 0       11       11          4   NA        1 MULTIPOLYGON (((61.21082 35...
## 1        6        6          4   NA        1 MULTIPOLYGON (((16.32653 -5...
## 2        7        7          4   NA        1 MULTIPOLYGON (((20.59025 41...
## 3       20       20          6   NA        1 MULTIPOLYGON (((51.57952 24...
## 4        9        9          4   NA        1 MULTIPOLYGON (((-65.5 -55.2...
## 5        7        7          4   NA        1 MULTIPOLYGON (((43.58275 41...
## 6       10       10          4   NA        1 MULTIPOLYGON (((-59.57209 -...
## 7       22       35         10    2       NA MULTIPOLYGON (((68.935 -48....
## 8        9        9          4   NA        1 MULTIPOLYGON (((145.398 -40...
## 9        7        7          5   NA        1 MULTIPOLYGON (((16.97967 48...
```

---

# 6.6 Converter dados sf

## Converter `sf` para `sp`

```r
# plot
plot(co110_sf$geometry, col = "gray", main = NA, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-73-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---

# 6.6 Converter dados sf

## Converter `sf` para `sp`

```r
# countries sp
co110_sp &lt;- sf::as_Spatial(co110_sf)
co110_sp
```

```
## class       : SpatialPolygonsDataFrame 
## features    : 177 
## extent      : -180, 180, -90, 83.64513  (xmin, xmax, ymin, ymax)
## crs         : +proj=longlat +ellps=WGS84 +no_defs 
## variables   : 63
## names       : scalerank,      featurecla, labelrank,  sovereignt, sov_a3, adm0_dif, level,              type,       admin, adm0_a3, geou_dif,     geounit, gu_a3, su_dif,     subunit, ... 
## min values  :         1, Admin-0 country,         2, Afghanistan,    AFG,        0,     2,           Country, Afghanistan,     AFG,        0, Afghanistan,   AFG,      0, Afghanistan, ... 
## max values  :         3, Admin-0 country,         7,    Zimbabwe,    ZWE,        1,     2, Sovereign country,    Zimbabwe,     ZWE,        0,    Zimbabwe,   ZWE,      1,    Zimbabwe, ...
```

---

class: inverse, center, middle

# Conversão do CRS

---

background-image: url(img/geo_proj_sirgas2000.png)
background-size: 200px
background-position: 50% 75%

# 6.7 Conversão do CRS

## Converter CRS local

### SIRGAS2000/GCS -&gt; SIRGAS2000/UTM23S

```r
# convert coordinate system
rc_2019_sirgas2000_utm23s &lt;- sf::st_transform(rc_2019, crs = 31983)
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://epsg.io/31983

[*] http://www.sirgas.org/pt/sirgas-realizations/sirgas2000/

---

# 6.7 Conversão do CRS

## Converter CRS local

### plota
&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-76-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---

background-image: url(img/geo_utm_zones.png)
background-size: 400px
background-position: 50% 65%

# 6.7 Conversão do CRS

## Converter CRS local

### SIRGAS2000/GCS -&gt; WGS84/UTM23S

```r
# convert datum and coordinate system
rc_2019_wgs84_utm23s &lt;- sf::st_transform(rc_2019, crs = 32723)
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://epsg.io/32723

[*] https://pro.arcgis.com/en/pro-app/help/mapping/properties/transverse-mercator.htm

---

background-image: url(img/geo_geographic.png)
background-size: 400px
background-position: 50% 70%

# 6.7 Conversão do CRS

## Converter CRS local

### SIRGAS2000/GCS -&gt; WGS84/GCS

```r
# convert datum
rc_2019_wgs84_gcs &lt;- sf::st_transform(rc_2019, crs = 4326)
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://epsg.io/4326

---

# 6.7 Conversão do CRS

## Converter CRS global

```r
# countries - WGS84/GCS
co110_sf
```

```
## Simple feature collection with 177 features and 63 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -180 ymin: -90 xmax: 180 ymax: 83.64513
## CRS:            +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
## First 10 features:
##   scalerank      featurecla labelrank           sovereignt sov_a3 adm0_dif level              type                               admin
## 0         1 Admin-0 country         3          Afghanistan    AFG        0     2 Sovereign country                         Afghanistan
## 1         1 Admin-0 country         3               Angola    AGO        0     2 Sovereign country                              Angola
## 2         1 Admin-0 country         6              Albania    ALB        0     2 Sovereign country                             Albania
## 3         1 Admin-0 country         4 United Arab Emirates    ARE        0     2 Sovereign country                United Arab Emirates
## 4         1 Admin-0 country         2            Argentina    ARG        0     2 Sovereign country                           Argentina
## 5         1 Admin-0 country         6              Armenia    ARM        0     2 Sovereign country                             Armenia
## 6         1 Admin-0 country         4           Antarctica    ATA        0     2     Indeterminate                          Antarctica
## 7         3 Admin-0 country         6               France    FR1        1     2        Dependency French Southern and Antarctic Lands
## 8         1 Admin-0 country         2            Australia    AU1        1     2           Country                           Australia
## 9         1 Admin-0 country         4              Austria    AUT        0     2 Sovereign country                             Austria
##   adm0_a3 geou_dif                             geounit gu_a3 su_dif                             subunit su_a3 brk_diff
## 0     AFG        0                         Afghanistan   AFG      0                         Afghanistan   AFG        0
## 1     AGO        0                              Angola   AGO      0                              Angola   AGO        0
## 2     ALB        0                             Albania   ALB      0                             Albania   ALB        0
## 3     ARE        0                United Arab Emirates   ARE      0                United Arab Emirates   ARE        0
## 4     ARG        0                           Argentina   ARG      0                           Argentina   ARG        0
## 5     ARM        0                             Armenia   ARM      0                             Armenia   ARM        0
## 6     ATA        0                          Antarctica   ATA      0                          Antarctica   ATA        0
## 7     ATF        0 French Southern and Antarctic Lands   ATF      0 French Southern and Antarctic Lands   ATF        0
## 8     AUS        0                           Australia   AUS      0                           Australia   AUS        0
## 9     AUT        0                             Austria   AUT      0                             Austria   AUT        0
##                     name                           name_long brk_a3                   brk_name brk_group     abbrev postal
## 0            Afghanistan                         Afghanistan    AFG                Afghanistan      &lt;NA&gt;       Afg.     AF
## 1                 Angola                              Angola    AGO                     Angola      &lt;NA&gt;       Ang.     AO
## 2                Albania                             Albania    ALB                    Albania      &lt;NA&gt;       Alb.     AL
## 3   United Arab Emirates                United Arab Emirates    ARE       United Arab Emirates      &lt;NA&gt;     U.A.E.     AE
## 4              Argentina                           Argentina    ARG                  Argentina      &lt;NA&gt;       Arg.     AR
## 5                Armenia                             Armenia    ARM                    Armenia      &lt;NA&gt;       Arm.    ARM
## 6             Antarctica                          Antarctica    ATA                 Antarctica      &lt;NA&gt;       Ant.     AQ
## 7 Fr. S. Antarctic Lands French Southern and Antarctic Lands    ATF Fr. S. and Antarctic Lands      &lt;NA&gt; Fr. S.A.L.     TF
## 8              Australia                           Australia    AUS                  Australia      &lt;NA&gt;       Auz.     AU
## 9                Austria                             Austria    AUT                    Austria      &lt;NA&gt;      Aust.      A
##                                              formal_en formal_fr note_adm0                         note_brk
## 0                         Islamic State of Afghanistan      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 1                          People's Republic of Angola      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 2                                  Republic of Albania      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 3                                 United Arab Emirates      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 4                                   Argentine Republic      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 5                                  Republic of Armenia      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 6                                                 &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; Multiple claims held in abeyance
## 7 Territory of the French Southern and Antarctic Lands      &lt;NA&gt;       Fr.                             &lt;NA&gt;
## 8                            Commonwealth of Australia      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
## 9                                  Republic of Austria      &lt;NA&gt;      &lt;NA&gt;                             &lt;NA&gt;
##                             name_sort name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13  pop_est gdp_md_est pop_year lastcensus gdp_year
## 0                         Afghanistan     &lt;NA&gt;         5         6         8          7 28400000    22270.0       NA       1979       NA
## 1                              Angola     &lt;NA&gt;         3         2         6          1 12799293   110300.0       NA       1970       NA
## 2                             Albania     &lt;NA&gt;         1         4         1          6  3639453    21810.0       NA       2001       NA
## 3                United Arab Emirates     &lt;NA&gt;         2         1         3          3  4798491   184300.0       NA       2010       NA
## 4                           Argentina     &lt;NA&gt;         3         1         3         13 40913584   573900.0       NA       2010       NA
## 5                             Armenia     &lt;NA&gt;         3         1         2         10  2967004    18770.0       NA       2001       NA
## 6                          Antarctica     &lt;NA&gt;         4         5         1         NA     3802      760.4       NA         NA       NA
## 7 French Southern and Antarctic Lands     &lt;NA&gt;         7         5         9         11      140       16.0       NA         NA       NA
## 8                           Australia     &lt;NA&gt;         1         2         2          7 21262641   800200.0       NA       2006       NA
## 9                             Austria     &lt;NA&gt;         3         1         3          4  8210281   329500.0       NA       2011       NA
##                      economy              income_grp wikipedia fips_10 iso_a2 iso_a3 iso_n3 un_a3 wb_a2 wb_a3 woe_id adm0_a3_is
## 0  7. Least developed region           5. Low income        NA    &lt;NA&gt;     AF    AFG    004   004    AF   AFG     NA        AFG
## 1  7. Least developed region  3. Upper middle income        NA    &lt;NA&gt;     AO    AGO    024   024    AO   AGO     NA        AGO
## 2       6. Developing region  4. Lower middle income        NA    &lt;NA&gt;     AL    ALB    008   008    AL   ALB     NA        ALB
## 3       6. Developing region 2. High income: nonOECD        NA    &lt;NA&gt;     AE    ARE    784   784    AE   ARE     NA        ARE
## 4    5. Emerging region: G20  3. Upper middle income        NA    &lt;NA&gt;     AR    ARG    032   032    AR   ARG     NA        ARG
## 5       6. Developing region  4. Lower middle income        NA    &lt;NA&gt;     AM    ARM    051   051    AM   ARM     NA        ARM
## 6       6. Developing region 2. High income: nonOECD        NA    &lt;NA&gt;     AQ    ATA    010  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     NA        ATA
## 7       6. Developing region 2. High income: nonOECD        NA    &lt;NA&gt;     TF    ATF    260  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     NA        ATF
## 8 2. Developed region: nonG7    1. High income: OECD        NA    &lt;NA&gt;     AU    AUS    036   036    AU   AUS     NA        AUS
## 9 2. Developed region: nonG7    1. High income: OECD        NA    &lt;NA&gt;     AT    AUT    040   040    AT   AUT     NA        AUT
##   adm0_a3_us adm0_a3_un adm0_a3_wb               continent               region_un                 subregion                  region_wb
## 0        AFG         NA         NA                    Asia                    Asia             Southern Asia                 South Asia
## 1        AGO         NA         NA                  Africa                  Africa             Middle Africa         Sub-Saharan Africa
## 2        ALB         NA         NA                  Europe                  Europe           Southern Europe      Europe &amp; Central Asia
## 3        ARE         NA         NA                    Asia                    Asia              Western Asia Middle East &amp; North Africa
## 4        ARG         NA         NA           South America                Americas             South America  Latin America &amp; Caribbean
## 5        ARM         NA         NA                    Asia                    Asia              Western Asia      Europe &amp; Central Asia
## 6        ATA         NA         NA              Antarctica              Antarctica                Antarctica                 Antarctica
## 7        ATF         NA         NA Seven seas (open ocean) Seven seas (open ocean)   Seven seas (open ocean)         Sub-Saharan Africa
## 8        AUS         NA         NA                 Oceania                 Oceania Australia and New Zealand        East Asia &amp; Pacific
## 9        AUT         NA         NA                  Europe                  Europe            Western Europe      Europe &amp; Central Asia
##   name_len long_len abbrev_len tiny homepart                       geometry
## 0       11       11          4   NA        1 MULTIPOLYGON (((61.21082 35...
## 1        6        6          4   NA        1 MULTIPOLYGON (((16.32653 -5...
## 2        7        7          4   NA        1 MULTIPOLYGON (((20.59025 41...
## 3       20       20          6   NA        1 MULTIPOLYGON (((51.57952 24...
## 4        9        9          4   NA        1 MULTIPOLYGON (((-65.5 -55.2...
## 5        7        7          4   NA        1 MULTIPOLYGON (((43.58275 41...
## 6       10       10          4   NA        1 MULTIPOLYGON (((-59.57209 -...
## 7       22       35         10    2       NA MULTIPOLYGON (((68.935 -48....
## 8        9        9          4   NA        1 MULTIPOLYGON (((145.398 -40...
## 9        7        7          5   NA        1 MULTIPOLYGON (((16.97967 48...
```

---

# 6.7 Conversão do CRS

## Converter CRS global

```r
# plot
plot(co110_sf$geometry, col = "gray", graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-80-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---

background-image: url(img/geo_proj_moll.png)
background-size: 450px
background-position: 50% 70%

# 6.7 Conversão do CRS

## Converter CRS global

### Projeção de Mollweide: preserva as relações de área

```r
# mollweide projection
co110_sf_moll &lt;- sf::st_transform(co110_sf, crs = "+proj=moll")
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://epsg.io/54009

[*] https://pro.arcgis.com/en/pro-app/help/mapping/properties/mollweide.htm

---

# 6.7 Conversão do CRS

## Converter CRS global

### Projeção de Mollweide

```r
# plot
plot(co110_sf_moll$geometry, col = "gray", graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-82-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---

background-image: url(img/geo_proj_wintri.png)
background-size: 400px
background-position: 50% 75%

# 6.7 Conversão do CRS

## Converter CRS global

### Projeção de Winkel Tripel: mínimo de distorção para área, direção e distância

```r
# winkel tripel projection
co110_sf_wintri &lt;- lwgeom::st_transform_proj(co110_sf, crs = "+proj=wintri")
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://pro.arcgis.com/en/pro-app/help/mapping/properties/winkel-tripel.htm

---

# 6.7 Conversão do CRS

## Converter CRS global

### Projeção de Winkel Tripel

```r
# plot
plot(co110_sf_wintri$geometry, col = "gray")
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-84-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---

background-image: url(img/geo_proj_eck4.png)
background-size: 400px
background-position: 50% 70%

# 6.7 Conversão do CRS

## Converter CRS global

### Projeção de Eckert IV: presenva a área e com meridianos elípticos

```r
# eckert iv projection
co110_sf_eck4 &lt;- sf::st_transform(co110_sf, crs = "+proj=eck4")
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://epsg.io/54012

[*] https://pro.arcgis.com/en/pro-app/help/mapping/properties/eckert-iv.htm

---

# 6.7 Conversão do CRS

## Converter CRS global

### Projeção de Eckert IV

```r
# plot
plot(co110_sf_eck4$geometry, col = "gray", graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-86-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---

background-image: url(img/geo_proj_laea.png)
background-size: 200px
background-position: 50% 70%

# 6.7 Conversão do CRS

## Converter CRS global

### Projeção azimutal de Lambert: preserva os tamanhos relativos e senso de direção a partir do centro

```r
# lambert projection
co110_sf_laea1 &lt;- sf::st_transform(co110_sf, crs = "+proj=laea +x_0=0 +y_0=0 +lon_0=0 +lat_0=0")
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://pro.arcgis.com/en/pro-app/help/mapping/properties/lambert-azimuthal-equal-area.htm

---

# 6.7 Conversão do CRS

## Converter CRS global

### Projeção azimutal de Lambert

```r
# plot
plot(co110_sf_laea1$geometry, col = "gray", graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-88-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---

background-image: url(img/geo_proj_laea.png)
background-size: 200px
background-position: 50% 70%

# 6.7 Conversão do CRS

## Converter CRS global

### Projeção azimutal de Lambert: preserva os tamanhos relativos e senso de direção a partir do centro

```r
# lambert projection
co110_sf_laea2 &lt;- sf::st_transform(co110_sf, crs = "+proj=laea +x_0=0 +y_0=0 +lon_0=-50 +lat_0=0")
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] https://pro.arcgis.com/en/pro-app/help/mapping/properties/lambert-azimuthal-equal-area.htm

---

# 6.7 Conversão do CRS

## Converter CRS global

### Projeção azimutal de Lambert

```r
# plot
plot(co110_sf_laea2$geometry, col = "gray", graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-90-1.png" width="90%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle
# Manipulação e análise de dados vetoriais

---

# 6.8 Operações de atributos

## Modificação de objetos espaciais baseado em **informações não espaciais** associadas a dados geográficos

### Operações:
1. Subset de atributos
1. Join de atributos 
1. Aggregation de atributos
1. Criação de atributos
1. Outros operações

---

# 6.8 Operações de atributos

## 1. Subset de atributos

```r
# 1. attribute subsetting
rc_use_forest &lt;- rc_use %&gt;% 
  dplyr::filter(CLASSE_USO == "formação florestal")
rc_use_forest
```

```
## Simple feature collection with 1 feature and 6 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: 215442.4 ymin: 7504235 xmax: 246282.3 ymax: 7537969
## projected CRS:  SIRGAS 2000 / UTM zone 23S
##   GEOCODIGO MUNICIPIO UF CD_UF         CLASSE_USO AREA_HA                       geometry
## 1   3543907 RIO CLARO SP    35 formação florestal 7017.99 MULTIPOLYGON (((232355 7504...
```

---

# 6.8 Operações de atributos

## 1. Subset de atributos

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_use_forest$geometry, col = "forestgreen", add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-92-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.8 Operações de atributos

## 2. Join de atributos 

```r
# 2. attribute joining - create data
da_class &lt;- tibble::tibble(CLASSE_USO = rc_use$CLASSE_USO, 
                           classe = c("agua", "antropico", "edificado", "floresta", "silvicultura"))
da_class
```

```
## # A tibble: 5 x 2
##   CLASSE_USO         classe      
##   &lt;chr&gt;              &lt;chr&gt;       
## 1 água               agua        
## 2 área antropizada   antropico   
## 3 área edificada     edificado   
## 4 formação florestal floresta    
## 5 silvicultura       silvicultura
```

---

# 6.8 Operações de atributos

## 2. Join de atributos 

```r
# 2. attribute joining - join
rc_use_class &lt;- dplyr::left_join(rc_use, da_class, by = "CLASSE_USO") %&gt;% 
  sf::st_drop_geometry()
rc_use_class
```

```
##   GEOCODIGO MUNICIPIO UF CD_UF         CLASSE_USO   AREA_HA       classe
## 1   3543907 RIO CLARO SP    35               água   357.027         agua
## 2   3543907 RIO CLARO SP    35   área antropizada 37297.800    antropico
## 3   3543907 RIO CLARO SP    35     área edificada  5078.330    edificado
## 4   3543907 RIO CLARO SP    35 formação florestal  7017.990     floresta
## 5   3543907 RIO CLARO SP    35       silvicultura   138.173 silvicultura
```

---

# 6.8 Operações de atributos

## 3. Aggregation de atributos

```r
# 3. attribute aggregation
rc_spr_n &lt;- rc_spr %&gt;% 
  dplyr::group_by(MUNICIPIO, HIDRO) %&gt;% 
  dplyr::summarise(n = n())
rc_spr_n
```

```
## Simple feature collection with 1 feature and 3 fields
## geometry type:  MULTIPOINT
## dimension:      XY
## bbox:           xmin: 217622.9 ymin: 7504132 xmax: 246367.4 ymax: 7537855
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## # A tibble: 1 x 4
## # Groups:   MUNICIPIO [1]
##   MUNICIPIO HIDRO        n                                                                                  geometry
##   &lt;chr&gt;     &lt;chr&gt;    &lt;int&gt;                                                                          &lt;MULTIPOINT [m]&gt;
## 1 RIO CLARO nascente  1220 ((217622.9 7528315), (217836.5 7528103), (217988.9 7528203), (218288.9 7528237), (2183...
```

---

# 6.8 Operações de atributos

## 3. Aggregation de atributos

```r
# plot 
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_spr_n$geometry, pch = 20, col = "blue", add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-96-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.8 Operações de atributos

## 4. Criação de atributos

```r
# 4. attribute create - columns
rc_use_use_area &lt;- rc_use %&gt;% 
  dplyr::mutate(classe_area = paste0(CLASSE_USO, " (", AREA_HA, " ha)")) %&gt;% 
  sf::st_drop_geometry()
rc_use_use_area
```

```
##   GEOCODIGO MUNICIPIO UF CD_UF         CLASSE_USO   AREA_HA                     classe_area
## 1   3543907 RIO CLARO SP    35               água   357.027               água (357.027 ha)
## 2   3543907 RIO CLARO SP    35   área antropizada 37297.800   área antropizada (37297.8 ha)
## 3   3543907 RIO CLARO SP    35     área edificada  5078.330     área edificada (5078.33 ha)
## 4   3543907 RIO CLARO SP    35 formação florestal  7017.990 formação florestal (7017.99 ha)
## 5   3543907 RIO CLARO SP    35       silvicultura   138.173       silvicultura (138.173 ha)
```

---

# 6.8 Operações de atributos

## 4. Criação de atributos

```r
# 4. attribute create - area
rc_use_area &lt;- rc_use %&gt;% 
  dplyr::mutate(area_m2 = sf::st_area(rc_use),
                area_ha = sf::st_area(rc_use)/1e4) %&gt;% 
  sf::st_drop_geometry()
rc_use_area
```

```
##   GEOCODIGO MUNICIPIO UF CD_UF         CLASSE_USO   AREA_HA         area_m2          area_ha
## 1   3543907 RIO CLARO SP    35               água   357.027   3570267 [m^2]   357.0267 [m^2]
## 2   3543907 RIO CLARO SP    35   área antropizada 37297.800 372978415 [m^2] 37297.8415 [m^2]
## 3   3543907 RIO CLARO SP    35     área edificada  5078.330  50783283 [m^2]  5078.3283 [m^2]
## 4   3543907 RIO CLARO SP    35 formação florestal  7017.990  70179895 [m^2]  7017.9895 [m^2]
## 5   3543907 RIO CLARO SP    35       silvicultura   138.173   1381726 [m^2]   138.1726 [m^2]
```

---

# 6.8 Operações de atributos

## 5. Outros operações: funções do `dplyr` para manipulação de feições

```r
dplyr::filter()
dplyr::distinc()
dplyr::slice()
dplyr::n_sample()
dplyr::group_by()
dplyr::summarise()
```

---

# 6.8 Operações de atributos

## 5. Outros operações: funções do `dplyr` para manipulação da tabela de atributos

```r
dplyr::select()
dplyr::pull()
dplyr::rename()
dplyr::mutate()
dplyr::arrange()
dplyr::*_join()
```

---

class: inverse, center, middle
# Operações espaciais

---

# 6.9 Operações espaciais

## Modificação de objetos espaciais baseado na sua **localização e formato**

### Operações:
1. Subset espacial
1. Join espacial
1. Pontos aleatórios
1. Quadrículas
1. Hexágonos

---

# 6.9 Operações espaciais

## 1. Subset espacial

```r
# spatial subsetting
sf::st_intersects(x = rc_spr, y = rc_use_forest)
```

```
## Sparse geometry binary predicate list of length 1220, where the predicate was `intersects'
## first 10 elements:
##  1: 1
##  2: 1
##  3: (empty)
##  4: 1
##  5: (empty)
##  6: (empty)
##  7: (empty)
##  8: (empty)
##  9: 1
##  10: (empty)
```

---

# 6.9 Operações espaciais

## 1. Subset espacial

```r
# spatial subsetting
sf::st_intersects(x = rc_spr, y = rc_use_forest, sparse = FALSE)
```

```
##          [,1]
##    [1,]  TRUE
##    [2,]  TRUE
##    [3,] FALSE
##    [4,]  TRUE
##    [5,] FALSE
##    [6,] FALSE
##    [7,] FALSE
##    [8,] FALSE
##    [9,]  TRUE
##   [10,] FALSE
##   [11,] FALSE
##   [12,] FALSE
##   [13,] FALSE
##   [14,] FALSE
##   [15,]  TRUE
##   [16,] FALSE
##   [17,] FALSE
##   [18,] FALSE
##   [19,]  TRUE
##   [20,] FALSE
##   [21,] FALSE
##   [22,] FALSE
##   [23,]  TRUE
##   [24,] FALSE
##   [25,] FALSE
##   [26,] FALSE
##   [27,] FALSE
##   [28,] FALSE
##   [29,] FALSE
##   [30,] FALSE
##   [31,] FALSE
##   [32,] FALSE
##   [33,] FALSE
##   [34,] FALSE
##   [35,] FALSE
##   [36,] FALSE
##   [37,] FALSE
##   [38,] FALSE
##   [39,] FALSE
##   [40,] FALSE
##   [41,] FALSE
##   [42,] FALSE
##   [43,] FALSE
##   [44,] FALSE
##   [45,] FALSE
##   [46,]  TRUE
##   [47,] FALSE
##   [48,] FALSE
##   [49,] FALSE
##   [50,]  TRUE
##   [51,] FALSE
##   [52,] FALSE
##   [53,] FALSE
##   [54,]  TRUE
##   [55,] FALSE
##   [56,] FALSE
##   [57,] FALSE
##   [58,] FALSE
##   [59,] FALSE
##   [60,]  TRUE
##   [61,] FALSE
##   [62,] FALSE
##   [63,] FALSE
##   [64,] FALSE
##   [65,] FALSE
##   [66,] FALSE
##   [67,] FALSE
##   [68,] FALSE
##   [69,] FALSE
##   [70,] FALSE
##   [71,] FALSE
##   [72,] FALSE
##   [73,]  TRUE
##   [74,] FALSE
##   [75,] FALSE
##   [76,]  TRUE
##   [77,] FALSE
##   [78,] FALSE
##   [79,]  TRUE
##   [80,] FALSE
##   [81,] FALSE
##   [82,]  TRUE
##   [83,] FALSE
##   [84,] FALSE
##   [85,] FALSE
##   [86,] FALSE
##   [87,] FALSE
##   [88,] FALSE
##   [89,] FALSE
##   [90,] FALSE
##   [91,] FALSE
##   [92,] FALSE
##   [93,]  TRUE
##   [94,]  TRUE
##   [95,] FALSE
##   [96,] FALSE
##   [97,]  TRUE
##   [98,] FALSE
##   [99,] FALSE
##  [100,] FALSE
##  [101,] FALSE
##  [102,]  TRUE
##  [103,]  TRUE
##  [104,] FALSE
##  [105,]  TRUE
##  [106,] FALSE
##  [107,] FALSE
##  [108,] FALSE
##  [109,]  TRUE
##  [110,] FALSE
##  [111,] FALSE
##  [112,] FALSE
##  [113,]  TRUE
##  [114,] FALSE
##  [115,] FALSE
##  [116,] FALSE
##  [117,]  TRUE
##  [118,]  TRUE
##  [119,]  TRUE
##  [120,] FALSE
##  [121,] FALSE
##  [122,] FALSE
##  [123,] FALSE
##  [124,]  TRUE
##  [125,] FALSE
##  [126,]  TRUE
##  [127,] FALSE
##  [128,] FALSE
##  [129,] FALSE
##  [130,] FALSE
##  [131,] FALSE
##  [132,]  TRUE
##  [133,]  TRUE
##  [134,] FALSE
##  [135,] FALSE
##  [136,] FALSE
##  [137,] FALSE
##  [138,] FALSE
##  [139,] FALSE
##  [140,] FALSE
##  [141,] FALSE
##  [142,] FALSE
##  [143,]  TRUE
##  [144,] FALSE
##  [145,] FALSE
##  [146,] FALSE
##  [147,] FALSE
##  [148,] FALSE
##  [149,] FALSE
##  [150,] FALSE
##  [151,] FALSE
##  [152,] FALSE
##  [153,] FALSE
##  [154,] FALSE
##  [155,] FALSE
##  [156,]  TRUE
##  [157,] FALSE
##  [158,] FALSE
##  [159,] FALSE
##  [160,] FALSE
##  [161,] FALSE
##  [162,] FALSE
##  [163,] FALSE
##  [164,] FALSE
##  [165,]  TRUE
##  [166,] FALSE
##  [167,]  TRUE
##  [168,] FALSE
##  [169,]  TRUE
##  [170,] FALSE
##  [171,]  TRUE
##  [172,] FALSE
##  [173,] FALSE
##  [174,] FALSE
##  [175,]  TRUE
##  [176,] FALSE
##  [177,]  TRUE
##  [178,] FALSE
##  [179,] FALSE
##  [180,]  TRUE
##  [181,]  TRUE
##  [182,] FALSE
##  [183,] FALSE
##  [184,] FALSE
##  [185,]  TRUE
##  [186,] FALSE
##  [187,] FALSE
##  [188,]  TRUE
##  [189,] FALSE
##  [190,] FALSE
##  [191,] FALSE
##  [192,] FALSE
##  [193,] FALSE
##  [194,] FALSE
##  [195,]  TRUE
##  [196,] FALSE
##  [197,] FALSE
##  [198,] FALSE
##  [199,] FALSE
##  [200,]  TRUE
##  [201,] FALSE
##  [202,]  TRUE
##  [203,] FALSE
##  [204,] FALSE
##  [205,] FALSE
##  [206,] FALSE
##  [207,] FALSE
##  [208,] FALSE
##  [209,] FALSE
##  [210,] FALSE
##  [211,] FALSE
##  [212,] FALSE
##  [213,] FALSE
##  [214,] FALSE
##  [215,]  TRUE
##  [216,] FALSE
##  [217,]  TRUE
##  [218,] FALSE
##  [219,] FALSE
##  [220,] FALSE
##  [221,] FALSE
##  [222,]  TRUE
##  [223,] FALSE
##  [224,] FALSE
##  [225,] FALSE
##  [226,] FALSE
##  [227,] FALSE
##  [228,] FALSE
##  [229,] FALSE
##  [230,] FALSE
##  [231,] FALSE
##  [232,] FALSE
##  [233,] FALSE
##  [234,] FALSE
##  [235,] FALSE
##  [236,] FALSE
##  [237,] FALSE
##  [238,] FALSE
##  [239,] FALSE
##  [240,]  TRUE
##  [241,] FALSE
##  [242,] FALSE
##  [243,] FALSE
##  [244,] FALSE
##  [245,] FALSE
##  [246,] FALSE
##  [247,] FALSE
##  [248,] FALSE
##  [249,] FALSE
##  [250,]  TRUE
##  [251,] FALSE
##  [252,] FALSE
##  [253,] FALSE
##  [254,] FALSE
##  [255,]  TRUE
##  [256,] FALSE
##  [257,] FALSE
##  [258,] FALSE
##  [259,] FALSE
##  [260,] FALSE
##  [261,]  TRUE
##  [262,] FALSE
##  [263,] FALSE
##  [264,] FALSE
##  [265,]  TRUE
##  [266,]  TRUE
##  [267,] FALSE
##  [268,]  TRUE
##  [269,] FALSE
##  [270,] FALSE
##  [271,] FALSE
##  [272,] FALSE
##  [273,] FALSE
##  [274,]  TRUE
##  [275,]  TRUE
##  [276,] FALSE
##  [277,] FALSE
##  [278,] FALSE
##  [279,] FALSE
##  [280,] FALSE
##  [281,] FALSE
##  [282,] FALSE
##  [283,] FALSE
##  [284,]  TRUE
##  [285,] FALSE
##  [286,] FALSE
##  [287,] FALSE
##  [288,] FALSE
##  [289,] FALSE
##  [290,] FALSE
##  [291,] FALSE
##  [292,] FALSE
##  [293,] FALSE
##  [294,] FALSE
##  [295,] FALSE
##  [296,] FALSE
##  [297,] FALSE
##  [298,] FALSE
##  [299,] FALSE
##  [300,] FALSE
##  [301,] FALSE
##  [302,] FALSE
##  [303,] FALSE
##  [304,] FALSE
##  [305,] FALSE
##  [306,] FALSE
##  [307,] FALSE
##  [308,] FALSE
##  [309,] FALSE
##  [310,]  TRUE
##  [311,] FALSE
##  [312,] FALSE
##  [313,] FALSE
##  [314,] FALSE
##  [315,] FALSE
##  [316,] FALSE
##  [317,] FALSE
##  [318,] FALSE
##  [319,] FALSE
##  [320,]  TRUE
##  [321,] FALSE
##  [322,]  TRUE
##  [323,] FALSE
##  [324,] FALSE
##  [325,] FALSE
##  [326,] FALSE
##  [327,] FALSE
##  [328,]  TRUE
##  [329,] FALSE
##  [330,]  TRUE
##  [331,] FALSE
##  [332,] FALSE
##  [333,] FALSE
##  [334,] FALSE
##  [335,] FALSE
##  [336,] FALSE
##  [337,] FALSE
##  [338,] FALSE
##  [339,] FALSE
##  [340,] FALSE
##  [341,] FALSE
##  [342,]  TRUE
##  [343,] FALSE
##  [344,] FALSE
##  [345,]  TRUE
##  [346,]  TRUE
##  [347,] FALSE
##  [348,] FALSE
##  [349,]  TRUE
##  [350,] FALSE
##  [351,] FALSE
##  [352,] FALSE
##  [353,] FALSE
##  [354,]  TRUE
##  [355,] FALSE
##  [356,] FALSE
##  [357,] FALSE
##  [358,]  TRUE
##  [359,] FALSE
##  [360,] FALSE
##  [361,] FALSE
##  [362,] FALSE
##  [363,] FALSE
##  [364,] FALSE
##  [365,] FALSE
##  [366,] FALSE
##  [367,] FALSE
##  [368,] FALSE
##  [369,] FALSE
##  [370,] FALSE
##  [371,] FALSE
##  [372,] FALSE
##  [373,] FALSE
##  [374,] FALSE
##  [375,] FALSE
##  [376,] FALSE
##  [377,] FALSE
##  [378,] FALSE
##  [379,] FALSE
##  [380,] FALSE
##  [381,] FALSE
##  [382,] FALSE
##  [383,] FALSE
##  [384,]  TRUE
##  [385,] FALSE
##  [386,] FALSE
##  [387,] FALSE
##  [388,] FALSE
##  [389,] FALSE
##  [390,] FALSE
##  [391,] FALSE
##  [392,] FALSE
##  [393,] FALSE
##  [394,] FALSE
##  [395,] FALSE
##  [396,] FALSE
##  [397,] FALSE
##  [398,] FALSE
##  [399,] FALSE
##  [400,] FALSE
##  [401,] FALSE
##  [402,] FALSE
##  [403,] FALSE
##  [404,]  TRUE
##  [405,]  TRUE
##  [406,] FALSE
##  [407,] FALSE
##  [408,] FALSE
##  [409,] FALSE
##  [410,] FALSE
##  [411,] FALSE
##  [412,] FALSE
##  [413,] FALSE
##  [414,] FALSE
##  [415,] FALSE
##  [416,] FALSE
##  [417,] FALSE
##  [418,] FALSE
##  [419,] FALSE
##  [420,] FALSE
##  [421,] FALSE
##  [422,] FALSE
##  [423,]  TRUE
##  [424,] FALSE
##  [425,] FALSE
##  [426,] FALSE
##  [427,]  TRUE
##  [428,] FALSE
##  [429,] FALSE
##  [430,] FALSE
##  [431,]  TRUE
##  [432,] FALSE
##  [433,] FALSE
##  [434,] FALSE
##  [435,] FALSE
##  [436,] FALSE
##  [437,] FALSE
##  [438,] FALSE
##  [439,] FALSE
##  [440,] FALSE
##  [441,] FALSE
##  [442,] FALSE
##  [443,] FALSE
##  [444,] FALSE
##  [445,]  TRUE
##  [446,] FALSE
##  [447,]  TRUE
##  [448,]  TRUE
##  [449,] FALSE
##  [450,] FALSE
##  [451,] FALSE
##  [452,] FALSE
##  [453,] FALSE
##  [454,] FALSE
##  [455,] FALSE
##  [456,] FALSE
##  [457,] FALSE
##  [458,]  TRUE
##  [459,]  TRUE
##  [460,] FALSE
##  [461,] FALSE
##  [462,] FALSE
##  [463,]  TRUE
##  [464,]  TRUE
##  [465,] FALSE
##  [466,] FALSE
##  [467,] FALSE
##  [468,] FALSE
##  [469,] FALSE
##  [470,] FALSE
##  [471,] FALSE
##  [472,]  TRUE
##  [473,] FALSE
##  [474,] FALSE
##  [475,]  TRUE
##  [476,] FALSE
##  [477,] FALSE
##  [478,]  TRUE
##  [479,]  TRUE
##  [480,] FALSE
##  [481,] FALSE
##  [482,] FALSE
##  [483,]  TRUE
##  [484,] FALSE
##  [485,] FALSE
##  [486,]  TRUE
##  [487,]  TRUE
##  [488,] FALSE
##  [489,] FALSE
##  [490,] FALSE
##  [491,] FALSE
##  [492,] FALSE
##  [493,] FALSE
##  [494,] FALSE
##  [495,] FALSE
##  [496,] FALSE
##  [497,]  TRUE
##  [498,] FALSE
##  [499,] FALSE
##  [500,] FALSE
##  [501,] FALSE
##  [502,] FALSE
##  [503,] FALSE
##  [504,] FALSE
##  [505,] FALSE
##  [506,] FALSE
##  [507,]  TRUE
##  [508,]  TRUE
##  [509,] FALSE
##  [510,]  TRUE
##  [511,]  TRUE
##  [512,] FALSE
##  [513,] FALSE
##  [514,] FALSE
##  [515,] FALSE
##  [516,] FALSE
##  [517,] FALSE
##  [518,] FALSE
##  [519,] FALSE
##  [520,] FALSE
##  [521,] FALSE
##  [522,] FALSE
##  [523,] FALSE
##  [524,] FALSE
##  [525,] FALSE
##  [526,] FALSE
##  [527,] FALSE
##  [528,] FALSE
##  [529,] FALSE
##  [530,] FALSE
##  [531,] FALSE
##  [532,] FALSE
##  [533,] FALSE
##  [534,] FALSE
##  [535,] FALSE
##  [536,] FALSE
##  [537,] FALSE
##  [538,] FALSE
##  [539,] FALSE
##  [540,] FALSE
##  [541,] FALSE
##  [542,]  TRUE
##  [543,] FALSE
##  [544,] FALSE
##  [545,] FALSE
##  [546,] FALSE
##  [547,] FALSE
##  [548,] FALSE
##  [549,] FALSE
##  [550,] FALSE
##  [551,] FALSE
##  [552,] FALSE
##  [553,] FALSE
##  [554,] FALSE
##  [555,] FALSE
##  [556,] FALSE
##  [557,] FALSE
##  [558,] FALSE
##  [559,] FALSE
##  [560,] FALSE
##  [561,] FALSE
##  [562,] FALSE
##  [563,] FALSE
##  [564,] FALSE
##  [565,] FALSE
##  [566,]  TRUE
##  [567,] FALSE
##  [568,] FALSE
##  [569,] FALSE
##  [570,] FALSE
##  [571,] FALSE
##  [572,] FALSE
##  [573,] FALSE
##  [574,] FALSE
##  [575,] FALSE
##  [576,] FALSE
##  [577,] FALSE
##  [578,] FALSE
##  [579,] FALSE
##  [580,] FALSE
##  [581,] FALSE
##  [582,] FALSE
##  [583,] FALSE
##  [584,] FALSE
##  [585,] FALSE
##  [586,] FALSE
##  [587,] FALSE
##  [588,] FALSE
##  [589,] FALSE
##  [590,] FALSE
##  [591,]  TRUE
##  [592,] FALSE
##  [593,] FALSE
##  [594,] FALSE
##  [595,] FALSE
##  [596,] FALSE
##  [597,] FALSE
##  [598,] FALSE
##  [599,] FALSE
##  [600,] FALSE
##  [601,]  TRUE
##  [602,]  TRUE
##  [603,] FALSE
##  [604,] FALSE
##  [605,] FALSE
##  [606,]  TRUE
##  [607,] FALSE
##  [608,] FALSE
##  [609,] FALSE
##  [610,] FALSE
##  [611,] FALSE
##  [612,] FALSE
##  [613,] FALSE
##  [614,] FALSE
##  [615,] FALSE
##  [616,] FALSE
##  [617,] FALSE
##  [618,] FALSE
##  [619,] FALSE
##  [620,] FALSE
##  [621,] FALSE
##  [622,] FALSE
##  [623,] FALSE
##  [624,] FALSE
##  [625,] FALSE
##  [626,] FALSE
##  [627,] FALSE
##  [628,] FALSE
##  [629,] FALSE
##  [630,] FALSE
##  [631,] FALSE
##  [632,] FALSE
##  [633,] FALSE
##  [634,] FALSE
##  [635,] FALSE
##  [636,] FALSE
##  [637,] FALSE
##  [638,] FALSE
##  [639,] FALSE
##  [640,] FALSE
##  [641,] FALSE
##  [642,] FALSE
##  [643,] FALSE
##  [644,] FALSE
##  [645,] FALSE
##  [646,] FALSE
##  [647,] FALSE
##  [648,] FALSE
##  [649,] FALSE
##  [650,] FALSE
##  [651,] FALSE
##  [652,] FALSE
##  [653,] FALSE
##  [654,] FALSE
##  [655,] FALSE
##  [656,] FALSE
##  [657,] FALSE
##  [658,] FALSE
##  [659,] FALSE
##  [660,] FALSE
##  [661,] FALSE
##  [662,] FALSE
##  [663,] FALSE
##  [664,] FALSE
##  [665,] FALSE
##  [666,]  TRUE
##  [667,] FALSE
##  [668,] FALSE
##  [669,] FALSE
##  [670,] FALSE
##  [671,] FALSE
##  [672,] FALSE
##  [673,] FALSE
##  [674,] FALSE
##  [675,] FALSE
##  [676,] FALSE
##  [677,] FALSE
##  [678,] FALSE
##  [679,] FALSE
##  [680,] FALSE
##  [681,] FALSE
##  [682,] FALSE
##  [683,] FALSE
##  [684,] FALSE
##  [685,] FALSE
##  [686,] FALSE
##  [687,] FALSE
##  [688,] FALSE
##  [689,]  TRUE
##  [690,] FALSE
##  [691,]  TRUE
##  [692,] FALSE
##  [693,] FALSE
##  [694,] FALSE
##  [695,] FALSE
##  [696,] FALSE
##  [697,] FALSE
##  [698,] FALSE
##  [699,] FALSE
##  [700,] FALSE
##  [701,] FALSE
##  [702,] FALSE
##  [703,] FALSE
##  [704,] FALSE
##  [705,] FALSE
##  [706,] FALSE
##  [707,] FALSE
##  [708,] FALSE
##  [709,] FALSE
##  [710,] FALSE
##  [711,] FALSE
##  [712,] FALSE
##  [713,] FALSE
##  [714,] FALSE
##  [715,] FALSE
##  [716,] FALSE
##  [717,] FALSE
##  [718,] FALSE
##  [719,]  TRUE
##  [720,] FALSE
##  [721,] FALSE
##  [722,] FALSE
##  [723,] FALSE
##  [724,] FALSE
##  [725,] FALSE
##  [726,] FALSE
##  [727,] FALSE
##  [728,] FALSE
##  [729,] FALSE
##  [730,] FALSE
##  [731,] FALSE
##  [732,] FALSE
##  [733,] FALSE
##  [734,] FALSE
##  [735,] FALSE
##  [736,] FALSE
##  [737,] FALSE
##  [738,] FALSE
##  [739,] FALSE
##  [740,] FALSE
##  [741,] FALSE
##  [742,] FALSE
##  [743,] FALSE
##  [744,] FALSE
##  [745,] FALSE
##  [746,] FALSE
##  [747,] FALSE
##  [748,] FALSE
##  [749,] FALSE
##  [750,] FALSE
##  [751,] FALSE
##  [752,] FALSE
##  [753,] FALSE
##  [754,] FALSE
##  [755,] FALSE
##  [756,] FALSE
##  [757,] FALSE
##  [758,] FALSE
##  [759,] FALSE
##  [760,] FALSE
##  [761,] FALSE
##  [762,] FALSE
##  [763,] FALSE
##  [764,] FALSE
##  [765,] FALSE
##  [766,] FALSE
##  [767,] FALSE
##  [768,] FALSE
##  [769,] FALSE
##  [770,] FALSE
##  [771,] FALSE
##  [772,]  TRUE
##  [773,] FALSE
##  [774,] FALSE
##  [775,] FALSE
##  [776,] FALSE
##  [777,] FALSE
##  [778,] FALSE
##  [779,] FALSE
##  [780,] FALSE
##  [781,] FALSE
##  [782,] FALSE
##  [783,] FALSE
##  [784,] FALSE
##  [785,] FALSE
##  [786,] FALSE
##  [787,] FALSE
##  [788,] FALSE
##  [789,] FALSE
##  [790,] FALSE
##  [791,] FALSE
##  [792,] FALSE
##  [793,] FALSE
##  [794,] FALSE
##  [795,] FALSE
##  [796,] FALSE
##  [797,] FALSE
##  [798,] FALSE
##  [799,] FALSE
##  [800,] FALSE
##  [801,] FALSE
##  [802,] FALSE
##  [803,] FALSE
##  [804,] FALSE
##  [805,] FALSE
##  [806,] FALSE
##  [807,] FALSE
##  [808,] FALSE
##  [809,]  TRUE
##  [810,] FALSE
##  [811,] FALSE
##  [812,] FALSE
##  [813,] FALSE
##  [814,] FALSE
##  [815,] FALSE
##  [816,] FALSE
##  [817,] FALSE
##  [818,] FALSE
##  [819,] FALSE
##  [820,] FALSE
##  [821,] FALSE
##  [822,]  TRUE
##  [823,] FALSE
##  [824,] FALSE
##  [825,] FALSE
##  [826,] FALSE
##  [827,] FALSE
##  [828,] FALSE
##  [829,]  TRUE
##  [830,] FALSE
##  [831,] FALSE
##  [832,] FALSE
##  [833,] FALSE
##  [834,] FALSE
##  [835,]  TRUE
##  [836,] FALSE
##  [837,] FALSE
##  [838,] FALSE
##  [839,] FALSE
##  [840,] FALSE
##  [841,] FALSE
##  [842,] FALSE
##  [843,] FALSE
##  [844,] FALSE
##  [845,] FALSE
##  [846,] FALSE
##  [847,] FALSE
##  [848,] FALSE
##  [849,] FALSE
##  [850,] FALSE
##  [851,]  TRUE
##  [852,] FALSE
##  [853,]  TRUE
##  [854,] FALSE
##  [855,] FALSE
##  [856,] FALSE
##  [857,] FALSE
##  [858,]  TRUE
##  [859,]  TRUE
##  [860,] FALSE
##  [861,] FALSE
##  [862,] FALSE
##  [863,] FALSE
##  [864,] FALSE
##  [865,] FALSE
##  [866,] FALSE
##  [867,] FALSE
##  [868,] FALSE
##  [869,] FALSE
##  [870,] FALSE
##  [871,] FALSE
##  [872,] FALSE
##  [873,] FALSE
##  [874,] FALSE
##  [875,] FALSE
##  [876,] FALSE
##  [877,]  TRUE
##  [878,] FALSE
##  [879,] FALSE
##  [880,] FALSE
##  [881,] FALSE
##  [882,] FALSE
##  [883,] FALSE
##  [884,] FALSE
##  [885,] FALSE
##  [886,] FALSE
##  [887,] FALSE
##  [888,] FALSE
##  [889,] FALSE
##  [890,] FALSE
##  [891,] FALSE
##  [892,] FALSE
##  [893,] FALSE
##  [894,] FALSE
##  [895,] FALSE
##  [896,] FALSE
##  [897,] FALSE
##  [898,] FALSE
##  [899,] FALSE
##  [900,] FALSE
##  [901,] FALSE
##  [902,] FALSE
##  [903,] FALSE
##  [904,] FALSE
##  [905,] FALSE
##  [906,]  TRUE
##  [907,] FALSE
##  [908,] FALSE
##  [909,] FALSE
##  [910,] FALSE
##  [911,] FALSE
##  [912,] FALSE
##  [913,] FALSE
##  [914,] FALSE
##  [915,] FALSE
##  [916,] FALSE
##  [917,] FALSE
##  [918,] FALSE
##  [919,] FALSE
##  [920,] FALSE
##  [921,] FALSE
##  [922,] FALSE
##  [923,]  TRUE
##  [924,] FALSE
##  [925,] FALSE
##  [926,] FALSE
##  [927,] FALSE
##  [928,] FALSE
##  [929,]  TRUE
##  [930,] FALSE
##  [931,] FALSE
##  [932,] FALSE
##  [933,] FALSE
##  [934,] FALSE
##  [935,] FALSE
##  [936,] FALSE
##  [937,] FALSE
##  [938,] FALSE
##  [939,]  TRUE
##  [940,]  TRUE
##  [941,] FALSE
##  [942,] FALSE
##  [943,] FALSE
##  [944,] FALSE
##  [945,] FALSE
##  [946,] FALSE
##  [947,] FALSE
##  [948,]  TRUE
##  [949,] FALSE
##  [950,]  TRUE
##  [951,] FALSE
##  [952,] FALSE
##  [953,] FALSE
##  [954,] FALSE
##  [955,] FALSE
##  [956,]  TRUE
##  [957,] FALSE
##  [958,] FALSE
##  [959,] FALSE
##  [960,] FALSE
##  [961,] FALSE
##  [962,]  TRUE
##  [963,] FALSE
##  [964,] FALSE
##  [965,]  TRUE
##  [966,] FALSE
##  [967,]  TRUE
##  [968,] FALSE
##  [969,] FALSE
##  [970,] FALSE
##  [971,] FALSE
##  [972,]  TRUE
##  [973,] FALSE
##  [974,] FALSE
##  [975,] FALSE
##  [976,] FALSE
##  [977,] FALSE
##  [978,] FALSE
##  [979,]  TRUE
##  [980,] FALSE
##  [981,] FALSE
##  [982,] FALSE
##  [983,] FALSE
##  [984,] FALSE
##  [985,] FALSE
##  [986,]  TRUE
##  [987,] FALSE
##  [988,] FALSE
##  [989,] FALSE
##  [990,] FALSE
##  [991,] FALSE
##  [992,] FALSE
##  [993,] FALSE
##  [994,] FALSE
##  [995,]  TRUE
##  [996,]  TRUE
##  [997,] FALSE
##  [998,] FALSE
##  [999,] FALSE
## [1000,] FALSE
##  [ reached getOption("max.print") -- omitted 220 rows ]
```

---

# 6.9 Operações espaciais

## 1. Subset espacial - dentro

```r
# spatial subsetting - inside
rc_spr_forest &lt;- rc_spr %&gt;% 
  dplyr::filter(sf::st_intersects(x = ., y = rc_use_forest, sparse = FALSE))
rc_spr_forest
```

```
## Simple feature collection with 169 features and 5 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 217622.9 ymin: 7505568 xmax: 246181.4 ymax: 7537185
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##    GEOCODIGO MUNICIPIO UF CD_UF    HIDRO                 geometry
## 1    3543907 RIO CLARO SP    35 nascente POINT (217622.9 7528315)
## 2    3543907 RIO CLARO SP    35 nascente POINT (217836.5 7528103)
## 3    3543907 RIO CLARO SP    35 nascente POINT (218288.9 7528237)
## 4    3543907 RIO CLARO SP    35 nascente POINT (218583.5 7528215)
## 5    3543907 RIO CLARO SP    35 nascente POINT (219062.2 7528499)
## 6    3543907 RIO CLARO SP    35 nascente POINT (219246.2 7529011)
## 7    3543907 RIO CLARO SP    35 nascente POINT (219554.5 7528573)
## 8    3543907 RIO CLARO SP    35 nascente POINT (220534.8 7528014)
## 9    3543907 RIO CLARO SP    35 nascente POINT (220754.5 7530181)
## 10   3543907 RIO CLARO SP    35 nascente POINT (220958.3 7526278)
```

---

# 6.9 Operações espaciais

## 1. Subset espacial [] - dentro

```r
# spatial subsetting - inside
rc_spr_forest &lt;- rc_spr[rc_use_forest, ]
rc_spr_forest
```

```
## Simple feature collection with 169 features and 5 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 217622.9 ymin: 7505568 xmax: 246181.4 ymax: 7537185
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##    GEOCODIGO MUNICIPIO UF CD_UF    HIDRO                 geometry
## 1    3543907 RIO CLARO SP    35 nascente POINT (217622.9 7528315)
## 2    3543907 RIO CLARO SP    35 nascente POINT (217836.5 7528103)
## 4    3543907 RIO CLARO SP    35 nascente POINT (218288.9 7528237)
## 9    3543907 RIO CLARO SP    35 nascente POINT (218583.5 7528215)
## 15   3543907 RIO CLARO SP    35 nascente POINT (219062.2 7528499)
## 19   3543907 RIO CLARO SP    35 nascente POINT (219246.2 7529011)
## 23   3543907 RIO CLARO SP    35 nascente POINT (219554.5 7528573)
## 46   3543907 RIO CLARO SP    35 nascente POINT (220534.8 7528014)
## 50   3543907 RIO CLARO SP    35 nascente POINT (220754.5 7530181)
## 54   3543907 RIO CLARO SP    35 nascente POINT (220958.3 7526278)
```

---

# 6.9 Operações espaciais

## 1. Subset espacial [] - dentro

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_use_forest$geometry, col = "forestgreen", add = TRUE)
plot(rc_spr_forest$geometry, col = "blue", pch = 20, cex = 1, add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-105-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.9 Operações espaciais

## 1. Subset espacial - fora

```r
# spatial subsetting - outside
rc_spr_forest_out &lt;- rc_spr %&gt;% 
  dplyr::filter(!sf::st_intersects(x = ., y = rc_use_forest, sparse = FALSE))
rc_spr_forest_out
```

```
## Simple feature collection with 1051 features and 5 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 217988.9 ymin: 7504132 xmax: 246367.4 ymax: 7537855
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##    GEOCODIGO MUNICIPIO UF CD_UF    HIDRO                 geometry
## 1    3543907 RIO CLARO SP    35 nascente POINT (217988.9 7528203)
## 2    3543907 RIO CLARO SP    35 nascente POINT (218346.6 7530583)
## 3    3543907 RIO CLARO SP    35 nascente POINT (218393.1 7528031)
## 4    3543907 RIO CLARO SP    35 nascente POINT (218508.3 7528470)
## 5    3543907 RIO CLARO SP    35 nascente POINT (218535.4 7530642)
## 6    3543907 RIO CLARO SP    35 nascente POINT (218760.1 7530258)
## 7    3543907 RIO CLARO SP    35 nascente POINT (218821.1 7529750)
## 8    3543907 RIO CLARO SP    35 nascente POINT (218868.5 7529257)
## 9    3543907 RIO CLARO SP    35 nascente POINT (218919.2 7528697)
## 10   3543907 RIO CLARO SP    35 nascente POINT (218958.8 7527735)
```

---

# 6.9 Operações espaciais

## 1. Subset espacial - fora

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_use_forest$geometry, col = "forestgreen", add = TRUE)
plot(rc_spr_forest_out$geometry, col = "steelblue", pch = 20, cex = 1, add = TRUE)
plot(rc_spr_forest$geometry, col = "blue", pch = 20, cex = 1, add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-107-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.9 Operações espaciais

## 2. Join espacial

```r
# 2. spatial join
rc_spr_use &lt;- rc_spr %&gt;% 
  sf::st_join(x = ., y = rc_use)
rc_spr_use
```

```
## Simple feature collection with 1220 features and 11 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 217622.9 ymin: 7504132 xmax: 246367.4 ymax: 7537855
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##    GEOCODIGO.x MUNICIPIO.x UF.x CD_UF.x    HIDRO GEOCODIGO.y MUNICIPIO.y UF.y CD_UF.y         CLASSE_USO  AREA_HA
## 1      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35 formação florestal  7017.99
## 2      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35 formação florestal  7017.99
## 3      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80
## 4      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35 formação florestal  7017.99
## 5      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80
## 6      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80
## 7      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80
## 8      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80
## 9      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35 formação florestal  7017.99
## 10     3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80
##                    geometry
## 1  POINT (217622.9 7528315)
## 2  POINT (217836.5 7528103)
## 3  POINT (217988.9 7528203)
## 4  POINT (218288.9 7528237)
## 5  POINT (218346.6 7530583)
## 6  POINT (218393.1 7528031)
## 7  POINT (218508.3 7528470)
## 8  POINT (218535.4 7530642)
## 9  POINT (218583.5 7528215)
## 10 POINT (218760.1 7530258)
```

---

# 6.9 Operações espaciais

## 2. Join espacial

```r
# 2. spatial join
rc_spr_use %&gt;% 
  sf::st_drop_geometry() %&gt;% 
  dplyr::count(CLASSE_USO)
```

```
##           CLASSE_USO    n
## 1               água    7
## 2   área antropizada 1027
## 3     área edificada   15
## 4 formação florestal  169
## 5       silvicultura    2
```

---

# 6.9 Operações espaciais

## 2. Join de atributos

```r
# 2. attribute join
col &lt;- tibble::tibble(CLASSE_USO = c("água", "área antropizada", "área edificada", "formação florestal", "silvicultura"),
                      color = c("blue", "orange", "gray30", "forestgreen", "green"))
col
```

```
## # A tibble: 5 x 2
##   CLASSE_USO         color      
##   &lt;chr&gt;              &lt;chr&gt;      
## 1 água               blue       
## 2 área antropizada   orange     
## 3 área edificada     gray30     
## 4 formação florestal forestgreen
## 5 silvicultura       green
```

---

# 6.9 Operações espaciais

## 2. Join de atributos

```r
# 2. attribute join
rc_spr_use &lt;- dplyr::left_join(rc_spr_use, col, by = "CLASSE_USO")
rc_spr_use
```

```
## Simple feature collection with 1220 features and 12 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 217622.9 ymin: 7504132 xmax: 246367.4 ymax: 7537855
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##    GEOCODIGO.x MUNICIPIO.x UF.x CD_UF.x    HIDRO GEOCODIGO.y MUNICIPIO.y UF.y CD_UF.y         CLASSE_USO  AREA_HA       color
## 1      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35 formação florestal  7017.99 forestgreen
## 2      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35 formação florestal  7017.99 forestgreen
## 3      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80      orange
## 4      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35 formação florestal  7017.99 forestgreen
## 5      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80      orange
## 6      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80      orange
## 7      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80      orange
## 8      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80      orange
## 9      3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35 formação florestal  7017.99 forestgreen
## 10     3543907   RIO CLARO   SP      35 nascente     3543907   RIO CLARO   SP      35   área antropizada 37297.80      orange
##                    geometry
## 1  POINT (217622.9 7528315)
## 2  POINT (217836.5 7528103)
## 3  POINT (217988.9 7528203)
## 4  POINT (218288.9 7528237)
## 5  POINT (218346.6 7530583)
## 6  POINT (218393.1 7528031)
## 7  POINT (218508.3 7528470)
## 8  POINT (218535.4 7530642)
## 9  POINT (218583.5 7528215)
## 10 POINT (218760.1 7530258)
```

---

# 6.9 Operações espaciais

## 2. Join espacial

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_spr_use[10], col = rc_spr_use$color, pch = 20, add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-112-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.9 Operações espaciais

## 3. Pontos aleatórios

```r
# 3. random points
rc_2019_sirgas2000_utm23s_rp &lt;- sf::st_sample(rc_2019_sirgas2000_utm23s, 1e3)
rc_2019_sirgas2000_utm23s_rp
```

```
## Geometry set for 1000 features 
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 215513.9 ymin: 7503984 xmax: 246236.7 ymax: 7537780
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 5 geometries:
```

---

# 6.9 Operações espaciais

## 3. Pontos aleatórios

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_2019_sirgas2000_utm23s_rp, pch = 20, cex = .5, col = "red", add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-114-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.9 Operações espaciais

## 3. Pontos aleatórios

```r
# 3. random points
rc_use_forest_rp &lt;- sf::st_sample(rc_use_forest, 1e3)
rc_use_forest_rp
```

```
## Geometry set for 1000 features 
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 216320 ymin: 7504284 xmax: 246227.3 ymax: 7537870
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 5 geometries:
```

---

# 6.9 Operações espaciais

## 3. Pontos aleatórios

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_use_forest$geom, col = "forestgreen", add = TRUE)
plot(rc_use_forest_rp, pch = 20, cex = .5, col = "red", add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-116-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.9 Operações espaciais

## 4. Quadrículas

```r
# 4. grid
rc_2019_sirgas2000_utm23s_grid &lt;- rc_2019_sirgas2000_utm23s %&gt;% 
  sf::st_make_grid(cellsize = 2000) %&gt;% 
  sf::st_as_sf()
rc_2019_sirgas2000_utm23s_grid
```

```
## Simple feature collection with 288 features and 0 fields
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: 215151.7 ymin: 7503729 xmax: 247151.7 ymax: 7539729
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##                                 x
## 1  POLYGON ((215151.7 7503729,...
## 2  POLYGON ((217151.7 7503729,...
## 3  POLYGON ((219151.7 7503729,...
## 4  POLYGON ((221151.7 7503729,...
## 5  POLYGON ((223151.7 7503729,...
## 6  POLYGON ((225151.7 7503729,...
## 7  POLYGON ((227151.7 7503729,...
## 8  POLYGON ((229151.7 7503729,...
## 9  POLYGON ((231151.7 7503729,...
## 10 POLYGON ((233151.7 7503729,...
```

---

# 6.9 Operações espaciais

## 4. Quadrículas

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_2019_sirgas2000_utm23s_grid, col = adjustcolor("red", .1), add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-118-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.9 Operações espaciais

## 4. Quadrículas

```r
# 4. grid - subset
rc_2019_sirgas2000_utm23s_grid_in &lt;- rc_2019_sirgas2000_utm23s_grid[rc_2019_sirgas2000_utm23s, ]
rc_2019_sirgas2000_utm23s_grid_in
```

```
## Simple feature collection with 167 features and 0 fields
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: 215151.7 ymin: 7503729 xmax: 247151.7 ymax: 7539729
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##                                 x
## 1  POLYGON ((227151.7 7503729,...
## 2  POLYGON ((229151.7 7503729,...
## 3  POLYGON ((231151.7 7503729,...
## 4  POLYGON ((233151.7 7503729,...
## 5  POLYGON ((235151.7 7503729,...
## 6  POLYGON ((225151.7 7505729,...
## 7  POLYGON ((227151.7 7505729,...
## 8  POLYGON ((229151.7 7505729,...
## 9  POLYGON ((231151.7 7505729,...
## 10 POLYGON ((233151.7 7505729,...
```

---

# 6.9 Operações espaciais

## 4. Quadrículas

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_2019_sirgas2000_utm23s_grid_in, col = adjustcolor("red", .1), add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-120-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.9 Operações espaciais

## 4. Quadrículas

```r
# 4. grid - count spring by cell
rc_2019_sirgas2000_utm23s_grid_in_spr_count &lt;- rc_2019_sirgas2000_utm23s_grid_in %&gt;% 
  dplyr::mutate(n = sf::st_intersects(x = ., rc_spr) %&gt;% lengths())
rc_2019_sirgas2000_utm23s_grid_in_spr_count
```

```
## Simple feature collection with 167 features and 1 field
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: 215151.7 ymin: 7503729 xmax: 247151.7 ymax: 7539729
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##                                 x  n
## 1  POLYGON ((227151.7 7503729,...  1
## 2  POLYGON ((229151.7 7503729,... 13
## 3  POLYGON ((231151.7 7503729,...  5
## 4  POLYGON ((233151.7 7503729,...  2
## 5  POLYGON ((235151.7 7503729,...  0
## 6  POLYGON ((225151.7 7505729,...  0
## 7  POLYGON ((227151.7 7505729,...  6
## 8  POLYGON ((229151.7 7505729,... 15
## 9  POLYGON ((231151.7 7505729,...  9
## 10 POLYGON ((233151.7 7505729,...  9
```

---

# 6.9 Operações espaciais

## 4. Quadrículas

```r
# plot
plot(rc_2019_sirgas2000_utm23s_grid_in_spr_count["n"], main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-122-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.9 Operações espaciais

## 5. Hexágonos

```r
# 5. hexagon
rc_2019_sirgas2000_utm23s_hex &lt;- rc_2019_sirgas2000_utm23s %&gt;% 
  sf::st_make_grid(cellsize = 2000, square = FALSE) %&gt;% 
  sf::st_as_sf()
rc_2019_sirgas2000_utm23s_hex
```

```
## Simple feature collection with 187 features and 0 fields
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: 214151.7 ymin: 7502574 xmax: 248151.7 ymax: 7539525
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##                                 x
## 1  POLYGON ((215151.7 7526823,...
## 2  POLYGON ((216151.7 7525091,...
## 3  POLYGON ((216151.7 7528555,...
## 4  POLYGON ((217151.7 7526823,...
## 5  POLYGON ((217151.7 7530287,...
## 6  POLYGON ((218151.7 7528555,...
## 7  POLYGON ((219151.7 7526823,...
## 8  POLYGON ((219151.7 7530287,...
## 9  POLYGON ((220151.7 7525091,...
## 10 POLYGON ((220151.7 7528555,...
```

---

# 6.9 Operações espaciais

## 5. Hexágonos

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_2019_sirgas2000_utm23s_hex, col = adjustcolor("blue", .1), add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-124-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.9 Operações espaciais

## 5. Hexágonos

```r
# 5. hexagon - count spring by hexagon
rc_2019_sirgas2000_utm23s_hex_spr_count &lt;- rc_2019_sirgas2000_utm23s_hex %&gt;% 
  dplyr::mutate(n = sf::st_intersects(x = ., rc_spr) %&gt;% lengths())
rc_2019_sirgas2000_utm23s_hex_spr_count
```

```
## Simple feature collection with 187 features and 1 field
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: 214151.7 ymin: 7502574 xmax: 248151.7 ymax: 7539525
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##                                 x  n
## 1  POLYGON ((215151.7 7526823,...  0
## 2  POLYGON ((216151.7 7525091,...  0
## 3  POLYGON ((216151.7 7528555,...  0
## 4  POLYGON ((217151.7 7526823,...  3
## 5  POLYGON ((217151.7 7530287,...  0
## 6  POLYGON ((218151.7 7528555,...  6
## 7  POLYGON ((219151.7 7526823,... 17
## 8  POLYGON ((219151.7 7530287,...  0
## 9  POLYGON ((220151.7 7525091,...  6
## 10 POLYGON ((220151.7 7528555,... 15
```

---

# 6.9 Operações espaciais

## 5. Hexágonos

```r
# plot
plot(rc_2019_sirgas2000_utm23s_hex_spr_count["n"], main = NA, axes = TRUE, graticule = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-126-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle
# Operações geométricas

---

# 6.10 Operações geométricas

## Modificação de objetos espaciais baseado em operações que mudam a **geometria do vetor**

### Operações:
1. Simplificação
1. Centroides
1. Buffers
1. União (Dissolve)
1. Corte (Clip)

---

# 6.10 Operações geométricas

## 1. Simplificação

```r
# 1. simplification
rc_riv_simp &lt;- sf::st_simplify(rc_riv, dTolerance = 1e4)
rc_riv_simp
```

```
## Simple feature collection with 1 feature and 6 fields
## geometry type:  MULTILINESTRING
## dimension:      XY
## bbox:           xmin: 215155.3 ymin: 7504132 xmax: 246367.4 ymax: 7537978
## projected CRS:  SIRGAS 2000 / UTM zone 23S
##   GEOCODIGO MUNICIPIO UF CD_UF                  HIDRO COMP_KM                       geometry
## 1   3543907 RIO CLARO SP    35 curso d'água (0 - 10m) 1142.98 MULTILINESTRING ((231815.7 ...
```

---

# 6.10 Operações geométricas

## 1. Simplificação

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_riv$geometry, col = "steelblue", add = TRUE)
plot(rc_riv_simp$geometry, col = adjustcolor("red", .7), add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-128-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.10 Operações geométricas

## 2. Centroides

```r
# 2. centroids
rc_2019_cent &lt;- sf::st_centroid(rc_2019_sirgas2000_utm23s)
rc_2019_cent
```

```
## Simple feature collection with 1 feature and 7 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 234336.7 ymin: 7523513 xmax: 234336.7 ymax: 7523513
## projected CRS:  SIRGAS 2000 / UTM zone 23S
##     code_muni name_muni code_state abbrev_state name_state code_region name_region                     geom
## 493   3543907 Rio Claro         35           SP  São Paulo           3     Sudeste POINT (234336.7 7523513)
```

---

# 6.10 Operações geométricas

## 2. Centroides

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_2019_cent$geom, cex = 3, col = "red", pch = 20, add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-130-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

# 6.10 Operações geométricas

## 2. Centroides

```r
# 2. centroids
rc_2019_sirgas2000_utm23s_hex_cent &lt;- sf::st_centroid(rc_2019_sirgas2000_utm23s_hex)
rc_2019_sirgas2000_utm23s_hex_cent
```

```
## Simple feature collection with 187 features and 0 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 215151.7 ymin: 7503729 xmax: 247151.7 ymax: 7538370
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##                           x
## 1  POINT (215151.7 7527978)
## 2  POINT (216151.7 7526245)
## 3  POINT (216151.7 7529710)
## 4  POINT (217151.7 7527978)
## 5  POINT (217151.7 7531442)
## 6  POINT (218151.7 7529710)
## 7  POINT (219151.7 7527978)
## 8  POINT (219151.7 7531442)
## 9  POINT (220151.7 7526245)
## 10 POINT (220151.7 7529710)
```

---

# 6.10 Operações geométricas

## 2. Centroides

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_2019_sirgas2000_utm23s_hex, col = adjustcolor("blue", .1), add = TRUE)
plot(rc_2019_sirgas2000_utm23s_hex_cent, col = "blue", pch = 20, add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-132-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.10 Operações geométricas

## 3. Buffer

```r
# 3. buffer
rc_spr_forest_buf &lt;- rc_spr_forest %&gt;% 
  sf::st_buffer(dist = 500)
rc_spr_forest_buf
```

```
## Simple feature collection with 169 features and 5 fields
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: 217122.9 ymin: 7505068 xmax: 246681.4 ymax: 7537685
## projected CRS:  SIRGAS 2000 / UTM zone 23S
## First 10 features:
##    GEOCODIGO MUNICIPIO UF CD_UF    HIDRO                       geometry
## 1    3543907 RIO CLARO SP    35 nascente POLYGON ((218122.9 7528315,...
## 2    3543907 RIO CLARO SP    35 nascente POLYGON ((218336.5 7528103,...
## 4    3543907 RIO CLARO SP    35 nascente POLYGON ((218788.9 7528237,...
## 9    3543907 RIO CLARO SP    35 nascente POLYGON ((219083.5 7528215,...
## 15   3543907 RIO CLARO SP    35 nascente POLYGON ((219562.2 7528499,...
## 19   3543907 RIO CLARO SP    35 nascente POLYGON ((219746.2 7529011,...
## 23   3543907 RIO CLARO SP    35 nascente POLYGON ((220054.5 7528573,...
## 46   3543907 RIO CLARO SP    35 nascente POLYGON ((221034.8 7528014,...
## 50   3543907 RIO CLARO SP    35 nascente POLYGON ((221254.5 7530181,...
## 54   3543907 RIO CLARO SP    35 nascente POLYGON ((221458.3 7526278,...
```

---

# 6.10 Operações geométricas

## 3. Buffer

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_spr_forest$geom, pch = 20, cex = .5, col = "blue", add = TRUE)
plot(rc_spr_forest_buf$geom, col = adjustcolor("white", 0), add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-134-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.10 Operações geométricas

## 4. União (Dissolve)

```r
# 4. union
rc_spr_forest_buf_union &lt;- sf::st_union(rc_spr_forest_buf)
rc_spr_forest_buf_union
```

```
## Geometry set for 1 feature 
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: 217122.9 ymin: 7505068 xmax: 246681.4 ymax: 7537685
## projected CRS:  SIRGAS 2000 / UTM zone 23S
```

---

# 6.10 Operações geométricas

## 4. União (Dissolve)

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_spr_forest$geom, pch = 20, cex = .5, col = "blue", add = TRUE)
plot(rc_spr_forest_buf_union, col = adjustcolor("white", 0), add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-136-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.10 Operações geométricas

## 5. Corte (Clip) - intersecção

```r
# 5. clipping - intersection
rc_riv_spr_forest_buf_int &lt;- sf::st_intersection(x = rc_riv, y = rc_spr_forest_buf_union)
rc_riv_spr_forest_buf_int
```

```
## Simple feature collection with 1 feature and 6 fields
## geometry type:  MULTILINESTRING
## dimension:      XY
## bbox:           xmin: 217364 ymin: 7505072 xmax: 246259.4 ymax: 7537676
## projected CRS:  SIRGAS 2000 / UTM zone 23S
##   GEOCODIGO MUNICIPIO UF CD_UF                  HIDRO COMP_KM                       geometry
## 1   3543907 RIO CLARO SP    35 curso d'água (0 - 10m) 1142.98 MULTILINESTRING ((217364 75...
```

---

# 6.10 Operações geométricas

## 5. Corte (Clip) - intersecção

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_spr_forest_buf_union, col = adjustcolor("blue", .1), add = TRUE)
plot(rc_riv_spr_forest_buf_int$geometry, col = "blue", add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-138-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

# 6.10 Operações geométricas

## 5. Corte (Clip) - diferença

```r
# 5. clipping - difference
rc_riv_spr_forest_buf_dif &lt;- sf::st_difference(x = rc_riv, y = rc_spr_forest_buf_union)
rc_riv_spr_forest_buf_dif
```

```
## Simple feature collection with 1 feature and 6 fields
## geometry type:  MULTILINESTRING
## dimension:      XY
## bbox:           xmin: 215155.3 ymin: 7504132 xmax: 246367.4 ymax: 7537978
## projected CRS:  SIRGAS 2000 / UTM zone 23S
##   GEOCODIGO MUNICIPIO UF CD_UF                  HIDRO COMP_KM                       geometry
## 1   3543907 RIO CLARO SP    35 curso d'água (0 - 10m) 1142.98 MULTILINESTRING ((215155.3 ...
```

---

# 6.10 Operações geométricas

## 5. Corte (Clip)

```r
# plot
plot(rc_2019_sirgas2000_utm23s$geom, col = "gray", main = NA, axes = TRUE, graticule = TRUE)
plot(rc_spr_forest_buf_union, col = adjustcolor("blue", .1), add = TRUE)
plot(rc_riv_spr_forest_buf_dif$geometry, col = "blue", add = TRUE)
```

&lt;img src="06_pres_intro_geocomp_r_files/figure-html/unnamed-chunk-140-1.png" width="45%" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle
# Exportar dados

---

background-image: url(img/geo_shp_logo.png),url(img/geo_shp_formats.png)
background-size: 150px,450px
background-position: 50% 60%,50% 90%

# 6.11 Exportar dados

## Exportar como shapefile

```r
# export shapefile
sf::st_write(obj = rc_spr_forest_buf, 
             dsn = here::here("03_dados", "vetor", "rc_spr_forest_buf.shp"),
             layer = "rc_spr_forest_buf.shp",
             driver = "ESRI Shapefile")
```

---

background-image: url(img/geo_ban_shp.png),url(img/geo_geopackage.png)
background-size: 200px,500px
background-position: 13% 60%,90% 70%

# 6.11 Exportar dados

## Exportar como geopackage

```r
# export geopackage
sf::st_write(obj = rc_spr_forest_buf, 
             dsn = here::here("03_dados", "vetor", "rc_spr_forest_buf.gpkg"),
             layer = "rc_spr_forest_buf")
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] http://switchfromshapefile.org/

[*] https://jsta.rbind.io/blog/2016-07-14-geopackage-r/

---

background-image: url(img/geo_ban_shp.png),url(img/geo_geopackage.png)
background-size: 200px,500px
background-position: 13% 60%,90% 70%

# 6.11 Exportar dados

## Exportar como geopackage

```r
# export geopackage
sf::st_write(obj = rc_spr_forest_buf_union, 
             dsn = here::here("03_dados", "vetor", "rc_spr_forest_buf.gpkg"),
             layer = "rc_spr_forest_buf_union")
```

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

[*] http://switchfromshapefile.org/

[*] https://jsta.rbind.io/blog/2016-07-14-geopackage-r/

---

class: inverse, middle, center

# Dúvidas?

---

class: clear, middle
background-image: url(img/gif_frog.gif)
background-size: 250px
background-position: 90% 90%

## Maurício Vancine

&lt;br&gt;&lt;br&gt;

Contatos:

&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#0000ee;"&gt;  [ comment ]  &lt;path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"&gt;&lt;/path&gt;&lt;/svg&gt; [mauricio.vancine@gmail.com]()  
&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#0000ee;"&gt;  [ comment ]  &lt;path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"&gt;&lt;/path&gt;&lt;/svg&gt; [@mauriciovancine](https://twitter.com/mauriciovancine)  
&lt;svg viewBox="0 0 496 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#0000ee;"&gt;  [ comment ]  &lt;path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"&gt;&lt;/path&gt;&lt;/svg&gt; [mauriciovancine](https://github.com/mauriciovancine)
&lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;position:relative;display:inline-block;top:.1em;fill:#0000ee;"&gt;  [ comment ]  &lt;path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"&gt;&lt;/path&gt;&lt;/svg&gt; [mauriciovancine.github.io](https://mauriciovancine.github.io)

&lt;br&gt;&lt;br&gt;

Slides criados via pacote [xaringan](https://github.com/yihui/xaringan) e tema [Metropolis](https://github.com/pat-s/xaringan-metropolis)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "rainbow",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
